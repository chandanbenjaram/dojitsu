/*------------------------------------------------------------------------
	- HTML Table Filter Generator v2.3
	- By Max Guglielmi (tablefilter.free.fr)
	- Licensed under the MIT License
--------------------------------------------------------------------------
Copyright (c) 2009-2011 Max Guglielmi

Permission is hereby granted, free of charge, to any person obtaining
a copy of this software and associated documentation files (the
"Software"), to deal in the Software without restriction, including
without limitation the rights to use, copy, modify, merge, publish,
distribute, sublicense, and/or sell copies of the Software, and to
permit persons to whom the Software is furnished to do so, subject to
the following conditions:

The above copyright notice and this permission notice shall be included
in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.
IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY
CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,
TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE
SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
--------------------------------------------------------------------------
	- Special credit to: 
	Cedric Wartel, cnx.claude@free.fr, Florent Hirchy, Váry Péter, 
	Anthony Maes, Nuovella Williams, Fuggerbit, Venkata Seshagiri Rao 
	Raya, Piepiax, Manuel Kern for active contribution and/or inspiration
------------------------------------------------------------------------*/

function setFilterGrid(id){if(arguments.length==0){return}eval("tf_"+id+" = new TF(arguments[0],arguments[1],arguments[2]);tf_"+id+".AddGrid();");return window["tf_"+id]}window.tf_isNotIE=!(/msie|MSIE/.test(navigator.userAgent));tf_AddEvent(window,(tf_isNotIE||(typeof window.addEventListener=="function")?"DOMContentLoaded":"load"),initFilterGrid);function initFilterGrid(){if(!document.getElementsByTagName){return}var g=tf_Tag(document,"table"),c;for(var e=0;e<g.length;e++){var d=g[e],b=d.getAttribute("id");if(tf_HasClass(d,"filterable")&&b){if(tf_IsObj(b+"_config")){c=window[b+"_config"]}else{c=undefined}window[b+"_isUnob"]=true;setFilterGrid(b,c)}}}var TF=function(m){if(arguments.length==0){return}this.id=m;this.version="2.3";this.tbl=tf_Id(m);this.startRow=undefined;this.refRow=null;this.headersRow=null;this.fObj=null;this.nbFilterableRows=null;this.nbRows=null;this.nbCells=null;this.hasGrid=false;this.enableModules=false;if(this.tbl!=null&&this.tbl.nodeName.tf_LCase()=="table"&&this.GetRowsNb()){if(arguments.length>1){for(var c=0;c<arguments.length;c++){var b=typeof arguments[c];switch(b.tf_LCase()){case"number":this.startRow=arguments[c];break;case"object":this.fObj=arguments[c];break}}}var d=!this.fObj?{}:this.fObj;this.refRow=this.startRow==undefined?2:(this.startRow+1);try{this.nbCells=this.GetCellsNb(this.refRow)}catch(g){this.nbCells=this.GetCellsNb(0)}this.basePath=d.base_path!=undefined?d.base_path:"TableFilter/";this.fltTypeInp="input";this.fltTypeSlc="select";this.fltTypeMulti="multiple";this.fltTypeCheckList="checklist";this.fltTypeNone="none";this.fltCol=[];for(var c=0;c<this.nbCells;c++){if(this["col"+c]==undefined){this["col"+c]=(d["col_"+c]==undefined)?this.fltTypeInp:d["col_"+c].tf_LCase()}this.fltCol.push(this["col"+c])}this.publicMethods=d.public_methods!=undefined?d.public_methods:false;this.fltGrid=d.grid==false?false:true;this.gridLayout=d.grid_layout?true:false;this.hasGridWidthsRow=false;this.gridColElms=[];this.sourceTblHtml=null;if(this.gridLayout){if(this.tbl.outerHTML==undefined){tf_SetOuterHtml()}this.sourceTblHtml=this.tbl.outerHTML}this.filtersRowIndex=d.filters_row_index!=undefined?d.filters_row_index:0;this.headersRow=d.headers_row_index!=undefined?d.headers_row_index:(this.filtersRowIndex==0?1:0);if(this.gridLayout){if(this.headersRow>1){this.filtersRowIndex=this.headersRow+1}else{this.filtersRowIndex=1;this.headersRow=0}}this.fltCellTag=d.filters_cell_tag!=undefined?(d.filters_cell_tag!="th"?"td":"th"):"td";this.fltIds=[];this.fltElms=[];this.searchArgs=null;this.tblData=[];this.validRowsIndex=null;this.fltGridEl=null;this.isFirstLoad=true;this.infDiv=null;this.lDiv=null;this.rDiv=null;this.mDiv=null;this.contDiv=null;this.infDivCssClass=d.inf_div_css_class!=undefined?d.inf_div_css_class:"inf";this.lDivCssClass=d.left_div_css_class!=undefined?d.left_div_css_class:"ldiv";this.rDivCssClass=d.right_div_css_class!=undefined?d.right_div_css_class:"rdiv";this.mDivCssClass=d.middle_div_css_class!=undefined?d.middle_div_css_class:"mdiv";this.contDivCssClass=d.content_div_css_class!=undefined?d.content_div_css_class:"cont";this.stylesheet=d.stylesheet!=undefined?d.stylesheet:this.basePath+"filtergrid.css";this.stylesheetId=this.id+"_style";this.fltsRowCssClass=d.flts_row_css_class!=undefined?d.flts_row_css_class:"fltrow";this.enableIcons=d.enable_icons!=undefined?d.enable_icons:true;this.alternateBgs=d.alternate_rows?true:false;this.hasColWidth=d.col_width?true:false;this.colWidth=this.hasColWidth?d.col_width:null;this.fixedHeaders=d.fixed_headers?true:false;this.tBodyH=d.tbody_height?d.tbody_height:200;this.fltCssClass=d.flt_css_class!=undefined?d.flt_css_class:"flt";this.fltMultiCssClass=d.flt_multi_css_class!=undefined?d.flt_multi_css_class:"flt_multi";this.fltSmallCssClass=d.flt_small_css_class!=undefined?d.flt_small_css_class:"flt_s";this.singleFltCssClass=d.single_flt_css_class!=undefined?d.single_flt_css_class:"single_flt";this.isStartBgAlternate=true;this.rowBgEvenCssClass=d.even_row_css_class!=undefined?d.even_row_css_class:"even";this.rowBgOddCssClass=d.odd_row_css_class!=undefined?d.odd_row_css_class:"odd";this.enterKey=d.enter_key==false?false:true;this.isModFilterFn=d.mod_filter_fn?true:false;this.modFilterFn=this.isModFilterFn?d.mod_filter_fn:null;this.onBeforeFilter=tf_IsFn(d.on_before_filter)?d.on_before_filter:null;this.onAfterFilter=tf_IsFn(d.on_after_filter)?d.on_after_filter:null;this.matchCase=d.match_case?true:false;this.exactMatch=d.exact_match?true:false;this.refreshFilters=d.refresh_filters?true:false;this.disableExcludedOptions=d.disable_excluded_options!=undefined?d.disable_excluded_options:false;this.activeFlt=null;this.activeFilterId=null;this.hasColOperation=d.col_operation?true:false;this.colOperation=null;this.hasVisibleRows=d.rows_always_visible?true:false;this.visibleRows=this.hasVisibleRows?d.rows_always_visible:[];this.searchType=d.search_type!=undefined?d.search_type:"include";this.isExternalFlt=d.external_flt_grid?true:false;this.externalFltTgtIds=d.external_flt_grid_ids!=undefined?d.external_flt_grid_ids:null;this.externalFltEls=[];this.execDelay=d.exec_delay?parseInt(d.exec_delay):100;this.status=d.status?true:false;this.onFiltersLoaded=tf_IsFn(d.on_filters_loaded)?d.on_filters_loaded:null;this.singleSearchFlt=d.single_search_filter?true:false;this.onRowValidated=tf_IsFn(d.on_row_validated)?d.on_row_validated:null;this.customCellDataCols=d.custom_cell_data_cols?d.custom_cell_data_cols:[];this.customCellData=tf_IsFn(d.custom_cell_data)?d.custom_cell_data:null;this.inpWatermark=d.input_watermark!=undefined?d.input_watermark:"";this.inpWatermarkCssClass=d.input_watermark_css_class!=undefined?d.input_watermark_css_class:"fltWatermark";this.isInpWatermarkArray=d.input_watermark!=undefined?(tf_IsArray(d.input_watermark)?true:false):false;this.toolBarTgtId=d.toolbar_target_id!=undefined?d.toolbar_target_id:null;this.helpInstructions=(d.help_instructions!=undefined)?d.help_instructions:null;this.popUpFilters=d.popup_filters!=undefined?d.popup_filters:false;this.markActiveColumns=d.mark_active_columns!=undefined?d.mark_active_columns:false;this.activeColumnsCssClass=d.active_columns_css_class!=undefined?d.active_columns_css_class:"activeHeader";this.onBeforeActiveColumn=tf_IsFn(d.on_before_active_column)?d.on_before_active_column:null;this.onAfterActiveColumn=tf_IsFn(d.on_after_active_column)?d.on_after_active_column:null;this.displayAllText=d.display_all_text!=undefined?d.display_all_text:"";this.enableSlcResetFilter=d.enable_slc_reset_filter!=undefined?d.enable_slc_reset_filter:true;this.enableEmptyOption=d.enable_empty_option?true:false;this.emptyText=d.empty_text!=undefined?d.empty_text:"(Empty)";this.enableNonEmptyOption=d.enable_non_empty_option?true:false;this.nonEmptyText=d.non_empty_text!=undefined?d.non_empty_text:"(Non empty)";this.onSlcChange=d.on_change==false?false:true;this.sortSlc=d.sort_select==false?false:true;this.isSortNumAsc=d.sort_num_asc?true:false;this.sortNumAsc=this.isSortNumAsc?d.sort_num_asc:null;this.isSortNumDesc=d.sort_num_desc?true:false;this.sortNumDesc=this.isSortNumDesc?d.sort_num_desc:null;this.slcFillingMethod=d.slc_filling_method!=undefined?d.slc_filling_method:"createElement";this.fillSlcOnDemand=d.fill_slc_on_demand?true:false;this.activateSlcTooltip=d.activate_slc_tooltip!=undefined?d.activate_slc_tooltip:"Click to activate";this.multipleSlcTooltip=d.multiple_slc_tooltip!=undefined?d.multiple_slc_tooltip:"Use Ctrl key for multiple selections";this.hasCustomSlcOptions=d.custom_slc_options&&tf_IsObj(d.custom_slc_options)?true:false;this.customSlcOptions=d.custom_slc_options!=undefined?d.custom_slc_options:null;this.onBeforeOperation=tf_IsFn(d.on_before_operation)?d.on_before_operation:null;this.onAfterOperation=tf_IsFn(d.on_after_operation)?d.on_after_operation:null;this.checkListDiv=[];this.checkListDivCssClass=d.div_checklist_css_class!=undefined?d.div_checklist_css_class:"div_checklist";this.checkListCssClass=d.checklist_css_class!=undefined?d.checklist_css_class:"flt_checklist";this.checkListItemCssClass=d.checklist_item_css_class!=undefined?d.checklist_item_css_class:"flt_checklist_item";this.checkListSlcItemCssClass=d.checklist_selected_item_css_class!=undefined?d.checklist_selected_item_css_class:"flt_checklist_slc_item";this.activateCheckListTxt=d.activate_checklist_text!=undefined?d.activate_checklist_text:"Click to load data";this.checkListItemDisabledCssClass=d.checklist_item_disabled_css_class!=undefined?d.checklist_item_disabled_css_class:"flt_checklist_item_disabled";this.enableCheckListResetFilter=d.enable_checklist_reset_filter!=undefined?d.enable_checklist_reset_filter:true;this.emOperator=d.empty_operator!=undefined?d.empty_operator:"[empty]";this.nmOperator=d.nonempty_operator!=undefined?d.nonempty_operator:"[nonempty]";this.orOperator=d.or_operator!=undefined?d.or_operator:"||";this.anOperator=d.and_operator!=undefined?d.and_operator:"&&";this.grOperator=d.greater_operator!=undefined?d.greater_operator:">";this.lwOperator=d.lower_operator!=undefined?d.lower_operator:"<";this.leOperator=d.lower_equal_operator!=undefined?d.lower_equal_operator:"<=";this.geOperator=d.greater_equal_operator!=undefined?d.greater_equal_operator:">=";this.dfOperator=d.different_operator!=undefined?d.different_operator:"!";this.lkOperator=d.like_operator!=undefined?d.like_operator:"*";this.eqOperator=d.equal_operator!=undefined?d.equal_operator:"=";this.stOperator=d.start_with_operator!=undefined?d.start_with_operator:"{";this.enOperator=d.end_with_operator!=undefined?d.end_with_operator:"}";this.curExp=d.cur_exp!=undefined?d.cur_exp:"^[¥£€$]";this.separator=d.separator!=undefined?d.separator:",";this.rowsCounter=d.rows_counter?true:false;this.statusBar=d.status_bar?d.status_bar:false;this.loader=d.loader?true:false;this.displayBtn=d.btn?true:false;this.btnText=d.btn_text!=undefined?d.btn_text:(!this.enableIcons?"Go":"");this.btnCssClass=d.btn_css_class!=undefined?d.btn_css_class:(!this.enableIcons?"btnflt":"btnflt_icon");this.btnReset=d.btn_reset?true:false;this.btnResetCssClass=d.btn_reset_css_class!=undefined?d.btn_reset_css_class:"reset";this.paging=d.paging?true:false;this.hasResultsPerPage=d.results_per_page?true:false;this.btnPageCssClass=d.paging_btn_css_class!=undefined?d.paging_btn_css_class:"pgInp";this.pagingSlc=null;this.resultsPerPage=null;this.resultsPerPageSlc=null;this.isPagingRemoved=false;this.nbVisibleRows=0;this.nbHiddenRows=0;this.startPagingRow=0;this.nbPages=0;this.currentPageNb=1;this.sort=d.sort?true:false;this.isSortEnabled=false;this.sorted=false;this.sortConfig=d.sort_config!=undefined?d.sort_config:{};this.sortConfig.name=this.sortConfig.name!=undefined?d.sort_config.name:"sortabletable";this.sortConfig.src=this.sortConfig.src!=undefined?d.sort_config.src:this.basePath+"sortabletable.js";this.sortConfig.adapterSrc=this.sortConfig.adapter_src!=undefined?d.sort_config.adapter_src:this.basePath+"tfAdapter.sortabletable.js";this.sortConfig.initialize=this.sortConfig.initialize!=undefined?d.sort_config.initialize:function(e){if(e.SetSortTable){e.SetSortTable()}};this.sortConfig.sortTypes=this.sortConfig.sort_types!=undefined?d.sort_config.sort_types:[];this.sortConfig.sortCol=this.sortConfig.sort_col!=undefined?d.sort_config.sort_col:null;this.sortConfig.asyncSort=this.sortConfig.async_sort!=undefined?true:false;this.sortConfig.triggerIds=this.sortConfig.sort_trigger_ids!=undefined?d.sort_config.sort_trigger_ids:[];this.selectable=d.selectable!=undefined?d.selectable:false;this.editable=d.editable!=undefined?d.editable:false;this.ezEditTableConfig=d.ezEditTable_config!=undefined?d.ezEditTable_config:{};this.ezEditTableConfig.name=this.ezEditTableConfig.name!=undefined?d.ezEditTable_config.name:"ezedittable";this.ezEditTableConfig.src=this.ezEditTableConfig.src!=undefined?d.ezEditTable_config.src:this.basePath+"ezEditTable/ezEditTable.js";this.ezEditTableConfig.loadStylesheet=this.ezEditTableConfig.loadStylesheet!=undefined?d.ezEditTable_config.loadStylesheet:false;this.ezEditTableConfig.stylesheet=this.ezEditTableConfig.stylesheet!=undefined?d.ezEditTable_config.stylesheet:this.basePath+"ezEditTable/ezEditTable.css";this.ezEditTableConfig.stylesheetName=this.ezEditTableConfig.stylesheetName!=undefined?d.ezEditTable_config.stylesheetName:"ezEditTableCss";this.onKeyUp=d.on_keyup?true:false;this.onKeyUpDelay=d.on_keyup_delay!=undefined?d.on_keyup_delay:900;this.isUserTyping=null;this.onKeyUpTimer=undefined;this.highlightKeywords=d.highlight_keywords?true:false;this.highlightCssClass=d.highlight_css_class!=undefined?d.highlight_css_class:"keyword";this.highlightedNodes=[];this.defaultDateType=d.default_date_type!=undefined?d.default_date_type:"DMY";this.thousandsSeparator=d.thousands_separator!=undefined?d.thousands_separator:",";this.decimalSeparator=d.decimal_separator!=undefined?d.decimal_separator:".";this.hasColNbFormat=d.col_number_format?true:false;this.colNbFormat=this.hasColNbFormat?d.col_number_format:null;this.hasColDateType=d.col_date_type?true:false;this.colDateType=this.hasColDateType?d.col_date_type:null;this.msgFilter=d.msg_filter!=undefined?d.msg_filter:"Filtering data...";this.msgPopulate=d.msg_populate!=undefined?d.msg_populate:"Populating filter...";this.msgPopulateCheckList=d.msg_populate_checklist!=undefined?d.msg_populate_checklist:"Populating list...";this.msgChangePage=d.msg_change_page!=undefined?d.msg_change_page:"Collecting paging data...";this.msgClear=d.msg_clear!=undefined?d.msg_clear:"Clearing filters...";this.msgChangeResults=d.msg_change_results!=undefined?d.msg_change_results:"Changing results per page...";this.msgResetValues=d.msg_reset_grid_values!=undefined?d.msg_reset_grid_values:"Re-setting filters values...";this.msgResetPage=d.msg_reset_page!=undefined?d.msg_reset_page:"Re-setting page...";this.msgResetPageLength=d.msg_reset_page_length!=undefined?d.msg_reset_page_length:"Re-setting page length...";this.msgSort=d.msg_sort!=undefined?d.msg_sort:"Sorting data...";this.msgLoadExtensions=d.msg_load_extensions!=undefined?d.msg_load_extensions:"Loading extensions...";this.msgLoadThemes=d.msg_load_themes!=undefined?d.msg_load_themes:"Loading theme(s)...";this.prfxTf="TF";this.prfxFlt="flt";this.prfxValButton="btn";this.prfxInfDiv="inf_";this.prfxLDiv="ldiv_";this.prfxRDiv="rdiv_";this.prfxMDiv="mdiv_";this.prfxContentDiv="cont_";this.prfxCheckListDiv="chkdiv_";this.prfxSlcPages="slcPages_";this.prfxSlcResults="slcResults_";this.prfxSlcResultsTxt="slcResultsTxt_";this.prfxBtnNextSpan="btnNextSpan_";this.prfxBtnPrevSpan="btnPrevSpan_";this.prfxBtnLastSpan="btnLastSpan_";this.prfxBtnFirstSpan="btnFirstSpan_";this.prfxBtnNext="btnNext_";this.prfxBtnPrev="btnPrev_";this.prfxBtnLast="btnLast_";this.prfxBtnFirst="btnFirst_";this.prfxPgSpan="pgspan_";this.prfxPgBeforeSpan="pgbeforespan_";this.prfxPgAfterSpan="pgafterspan_";this.prfxCounter="counter_";this.prfxTotRows="totrows_span_";this.prfxTotRowsTxt="totRowsTextSpan_";this.prfxResetSpan="resetspan_";this.prfxLoader="load_";this.prfxStatus="status_";this.prfxStatusSpan="statusSpan_";this.prfxStatusTxt="statusText_";this.prfxCookieFltsValues="tf_flts_";this.prfxCookiePageNb="tf_pgnb_";this.prfxCookiePageLen="tf_pglen_";this.prfxMainTblCont="gridCont_";this.prfxTblCont="tblCont_";this.prfxHeadTblCont="tblHeadCont_";this.prfxHeadTbl="tblHead_";this.prfxGridFltTd="_td_";this.prfxGridTh="tblHeadTh_";this.prfxHelpSpan="helpSpan_";this.prfxHelpDiv="helpDiv_";this.prfxPopUpSpan="popUpSpan_";this.prfxPopUpDiv="popUpDiv_";this.hasStoredValues=false;this.rememberGridValues=d.remember_grid_values?true:false;this.fltsValuesCookie=this.prfxCookieFltsValues+this.id;this.rememberPageNb=this.paging&&d.remember_page_number?true:false;this.pgNbCookie=this.prfxCookiePageNb+this.id;this.rememberPageLen=this.paging&&d.remember_page_length?true:false;this.pgLenCookie=this.prfxCookiePageLen+this.id;this.cookieDuration=d.set_cookie_duration?parseInt(d.set_cookie_duration):100000;this.hasExtensions=d.extensions?true:false;this.extensions=(this.hasExtensions)?d.extensions:null;this.enableDefaultTheme=d.enable_default_theme?true:false;this.hasThemes=(d.enable_default_theme||(d.themes&&tf_IsObj(d.themes)))?true:false;this.themes=(this.hasThemes)?d.themes:null;this.themesPath=d.themes_path!=undefined?d.themes_path:this.basePath+"TF_Themes/";this.hasBindScript=d.bind_script?true:false;this.bindScript=(this.hasBindScript)?d.bind_script:null;var l=this;this.Evt={name:{filter:"Filter",populateselect:"Populate",populatechecklist:"PopulateCheckList",changepage:"ChangePage",clear:"Clear",changeresultsperpage:"ChangeResults",resetvalues:"ResetValues",resetpage:"ResetPage",resetpagelength:"ResetPageLength",sort:"Sort",loadextensions:"LoadExtensions",loadthemes:"LoadThemes"},_DetectKey:function(p){if(!l.enterKey){return}var n=p||window.event;if(n){var o=(n.charCode)?n.charCode:((n.keyCode)?n.keyCode:((n.which)?n.which:0));if(o=="13"){l._Filter();tf_CancelEvent(n);tf_StopEvent(n)}else{l.isUserTyping=true;window.clearInterval(l.onKeyUpTimer);l.onKeyUpTimer=undefined}}},_OnKeyUp:function(q){if(!l.onKeyUp){return}var n=q||window.event;var o=(n.charCode)?n.charCode:((n.keyCode)?n.keyCode:((n.which)?n.which:0));l.isUserTyping=false;if(o!=13&&o!=9&&o!=27&&o!=38&&o!=40){function p(){window.clearInterval(l.onKeyUpTimer);l.onKeyUpTimer=undefined;if(!l.isUserTyping){l.Filter();l.isUserTyping=null}}if(l.onKeyUpTimer==undefined){l.onKeyUpTimer=window.setInterval(p,l.onKeyUpDelay)}}else{window.clearInterval(l.onKeyUpTimer);l.onKeyUpTimer=undefined}},_OnKeyDown:function(n){if(!l.onKeyUp){return}l.isUserTyping=true},_OnInpBlur:function(n){if(l.onKeyUp){l.isUserTyping=false;window.clearInterval(l.onKeyUpTimer)}if(this.value==""&&l.inpWatermark!=""){this.value=(l.isInpWatermarkArray)?l.inpWatermark[this.getAttribute("ct")]:l.inpWatermark;tf_AddClass(this,l.inpWatermarkCssClass)}if(l.ezEditTable){if(l.editable){l.ezEditTable.Editable.Set()}if(l.selectable){l.ezEditTable.Selection.Set()}}},_OnInpFocus:function(p){var o=p||window.event;l.activeFilterId=this.getAttribute("id");l.activeFlt=tf_Id(l.activeFilterId);if(!l.isInpWatermarkArray){if(this.value==l.inpWatermark&&l.inpWatermark!=""){this.value="";tf_RemoveClass(this,l.inpWatermarkCssClass)}}else{var n=l.inpWatermark[this.getAttribute("ct")];if(this.value==n&&n!=""){this.value="";tf_RemoveClass(this,l.inpWatermarkCssClass)}}if(l.popUpFilters){tf_CancelEvent(o);tf_StopEvent(o)}if(l.ezEditTable){if(l.editable){l.ezEditTable.Editable.Remove()}if(l.selectable){l.ezEditTable.Selection.Remove()}}},_OnSlcFocus:function(p){var n=p||window.event;l.activeFilterId=this.getAttribute("id");l.activeFlt=tf_Id(l.activeFilterId);if(l.fillSlcOnDemand&&this.getAttribute("filled")=="0"){var o=this.getAttribute("ct");l.PopulateSelect(o);if(!tf_isIE){this.setAttribute("filled","1")}}if(l.popUpFilters){tf_CancelEvent(n);tf_StopEvent(n)}},_OnSlcChange:function(o){if(l.activeFlt&&l.activeFlt.getAttribute("colIndex")&&l["col"+l.activeFlt.getAttribute("colIndex")]==l.fltTypeCheckList&&!l.Evt._OnSlcChange.caller){return}var n=o||window.event;if(l.popUpFilters){tf_StopEvent(n)}if(l.onSlcChange){l.Filter()}},_OnSlcBlur:function(){},_OnCheckListChange:function(n){if(!l.Evt._OnCheckListChange.caller){return}l.Evt._OnSlcChange(n)},_OnCheckListClick:function(){if(l.fillSlcOnDemand&&this.getAttribute("filled")=="0"){var e=this.getAttribute("ct");l.PopulateCheckList(e);l.checkListDiv[e].onclick=null;l.checkListDiv[e].title=""}},_OnCheckListFocus:function(){l.activeFilterId=this.firstChild.getAttribute("id");l.activeFlt=tf_Id(l.activeFilterId)},_OnBtnClick:function(){l.Filter()},_OnSlcPagesChangeEvt:null,_EnableSlc:function(){this.firstChild.disabled=false;this.firstChild.focus();this.onclick=null},_Clear:function(){l.ClearFilters()},_OnHelpBtnClick:function(){l._ToggleHelp()},_Paging:{nextEvt:null,prevEvt:null,lastEvt:null,firstEvt:null}}}};TF.prototype={AddGrid:function(){this._AddGrid()},Init:function(){this.AddGrid()},Initialize:function(){this.AddGrid()},init:function(){this.AddGrid()},initialize:function(){this.AddGrid()},_AddGrid:function(){if(this.hasGrid){return}if(this.gridLayout){this.refRow=this.startRow==undefined?0:this.startRow}if(this.popUpFilters&&((this.filtersRowIndex==0&&this.headersRow==1)||this.gridLayout)){this.headersRow=0}var v=!this.fObj?{}:this.fObj;var r=(this.singleSearchFlt)?1:this.nbCells,q;if(window["tf_"+this.id]==undefined){window["tf_"+this.id]=this}this.IncludeFile(this.stylesheetId,this.stylesheet,null,"link");if(this.hasThemes){this._LoadThemes()}if(this.gridLayout){this.isExternalFlt=true;this.SetGridLayout();this.refRow=(tf_isIE||tf_isIE7)?(this.refRow+1):0}if(this.loader){this.SetLoader()}if(this.popUpFilters){if(!this.isFirstLoad&&!this.gridLayout){this.headersRow--}this.SetPopupFilterIcons()}if(this.hasResultsPerPage){this.resultsPerPage=v.results_per_page!=undefined?v.results_per_page:this.resultsPerPage;if(this.resultsPerPage.length<2){this.hasResultsPerPage=false}else{this.pagingLength=this.resultsPerPage[1][0]}}if(!this.fltGrid){this.refRow=(this.refRow-1);if(this.gridLayout){this.refRow=0}this.nbFilterableRows=this.GetRowsNb();this.nbVisibleRows=this.nbFilterableRows;this.nbRows=this.nbFilterableRows+this.refRow}else{if(this.isFirstLoad){if(!this.gridLayout){var s;var u=tf_Tag(this.tbl,"thead");if(u.length>0){s=u[0].insertRow(this.filtersRowIndex)}else{s=this.tbl.insertRow(this.filtersRowIndex)}if(this.headersRow>1&&this.filtersRowIndex<=this.headersRow&&!this.popUpFilters){this.headersRow++}if(this.popUpFilters){this.headersRow++}if(this.fixedHeaders){this.SetFixedHeaders()}s.className=this.fltsRowCssClass;if(this.isExternalFlt&&(!this.gridLayout||this.popUpFilters)){s.style.display="none"}}this.nbFilterableRows=this.GetRowsNb();this.nbVisibleRows=this.nbFilterableRows;this.nbRows=this.tbl.rows.length;for(var t=0;t<r;t++){var g=tf_CreateElm(this.fltCellTag);if(this.singleSearchFlt){g.colSpan=this.nbCells}if(!this.gridLayout){s.appendChild(g)}q=(t==r-1&&this.displayBtn)?this.fltSmallCssClass:this.fltCssClass;if(this.popUpFilters){this.SetPopupFilter(t)}if(this["col"+t]==undefined){this["col"+t]=(v["col_"+t]==undefined)?this.fltTypeInp:v["col_"+t].tf_LCase()}if(this.singleSearchFlt){this["col"+t]=this.fltTypeInp;q=this.singleFltCssClass}if(this["col"+t]==this.fltTypeSlc||this["col"+t]==this.fltTypeMulti){var e=tf_CreateElm(this.fltTypeSlc,["id",this.prfxFlt+t+"_"+this.id],["ct",t],["filled","0"]);if(this["col"+t]==this.fltTypeMulti){e.multiple=this.fltTypeMulti;e.title=this.multipleSlcTooltip}e.className=(this["col"+t].tf_LCase()==this.fltTypeSlc)?q:this.fltMultiCssClass;if(this.isExternalFlt&&this.externalFltTgtIds&&tf_Id(this.externalFltTgtIds[t])){tf_Id(this.externalFltTgtIds[t]).appendChild(e);this.externalFltEls.push(e)}else{g.appendChild(e)}this.fltIds.push(this.prfxFlt+t+"_"+this.id);if(!this.fillSlcOnDemand){this._PopulateSelect(t)}e.onkeypress=this.Evt._DetectKey;e.onchange=this.Evt._OnSlcChange;e.onfocus=this.Evt._OnSlcFocus;e.onblur=this.Evt._OnSlcBlur;if(this.fillSlcOnDemand){var x=tf_CreateOpt(this.displayAllText,"");e.appendChild(x)}if(this.fillSlcOnDemand&&tf_isIE){e.disabled=true;e.title=this.activateSlcTooltip;e.parentNode.onclick=this.Evt._EnableSlc;if(this["col"+t]==this.fltTypeMulti){this.__deferMultipleSelection(e,0)}}}else{if(this["col"+t]==this.fltTypeCheckList){var b=tf_CreateElm("div",["id",this.prfxCheckListDiv+t+"_"+this.id],["ct",t],["filled","0"]);b.className=this.checkListDivCssClass;if(this.isExternalFlt&&this.externalFltTgtIds&&tf_Id(this.externalFltTgtIds[t])){tf_Id(this.externalFltTgtIds[t]).appendChild(b);this.externalFltEls.push(b)}else{g.appendChild(b)}this.checkListDiv[t]=b;this.fltIds.push(this.prfxFlt+t+"_"+this.id);if(!this.fillSlcOnDemand){this._PopulateCheckList(t)}b.onclick=this.Evt._OnCheckListFocus;if(this.fillSlcOnDemand){b.onclick=this.Evt._OnCheckListClick;b.appendChild(tf_CreateText(this.activateCheckListTxt))}}else{var p;(this["col"+t]==this.fltTypeInp)?p="text":p="hidden";var c=tf_CreateElm(this.fltTypeInp,["id",this.prfxFlt+t+"_"+this.id],["type",p],["ct",t]);if(p!="hidden"){c.value=(this.isInpWatermarkArray)?this.inpWatermark[t]:this.inpWatermark}c.className=q;if(this.inpWatermark!=""){tf_AddClass(c,this.inpWatermarkCssClass)}c.onfocus=this.Evt._OnInpFocus;if(this.isExternalFlt&&this.externalFltTgtIds&&tf_Id(this.externalFltTgtIds[t])){tf_Id(this.externalFltTgtIds[t]).appendChild(c);this.externalFltEls.push(c)}else{g.appendChild(c)}this.fltIds.push(this.prfxFlt+t+"_"+this.id);c.onkeypress=this.Evt._DetectKey;c.onkeydown=this.Evt._OnKeyDown;c.onkeyup=this.Evt._OnKeyUp;c.onblur=this.Evt._OnInpBlur;if(this.rememberGridValues){var y=tf_ReadCookie(this.fltsValuesCookie);var d=new RegExp(this.separator,"g");var o=y.split(d);if(o[t]!=" "){this.SetFilterValue(t,o[t],false)}}}}if(t==r-1&&this.displayBtn){var l=tf_CreateElm(this.fltTypeInp,["id",this.prfxValButton+t+"_"+this.id],["type","button"],["value",this.btnText]);l.className=this.btnCssClass;if(this.isExternalFlt&&this.externalFltTgtIds&&tf_Id(this.externalFltTgtIds[t])){tf_Id(this.externalFltTgtIds[t]).appendChild(l)}else{g.appendChild(l)}l.onclick=this.Evt._OnBtnClick}}}else{this.__resetGrid()}}if(this.rowsCounter){this.SetRowsCounter()}if(this.statusBar){this.SetStatusBar()}if(this.fixedHeaders&&!this.isFirstLoad){this.SetFixedHeaders()}if(this.paging){this.SetPaging()}if(this.hasResultsPerPage&&this.paging){this.SetResultsPerPage()}if(this.btnReset){this.SetResetBtn()}if(this.helpInstructions){this.SetHelpInstructions()}if(this.hasColWidth&&!this.gridLayout){this.SetColWidths()}if(this.alternateBgs&&this.isStartBgAlternate){this.SetAlternateRows()}if(this.hasColOperation&&this.fltGrid){this.colOperation=v.col_operation;this.SetColOperation()}if(this.sort||this.gridLayout){this.SetSort()}if(this.selectable||this.editable){this.SetEditable()}if(this.hasBindScript){if(this.bindScript.src!=undefined){var m=this.bindScript.src;var w=(this.bindScript.name!=undefined)?this.bindScript.name:"";this.IncludeFile(w,m,this.bindScript.target_fn)}}this.isFirstLoad=false;this.hasGrid=true;if(this.rememberGridValues||this.rememberPageLen||this.rememberPageNb){this.ResetValues()}if(!this.gridLayout){tf_AddClass(this.tbl,this.prfxTf)}if(this.loader){this.ShowLoader("none")}if(this.hasExtensions){this.LoadExtensions()}if(this.onFiltersLoaded){this.onFiltersLoaded.call(null,this)}},EvtManager:function(p,q){var b=this;var n=(q!=undefined&&q.slcIndex!=undefined)?q.slcIndex:null;var d=(q!=undefined&&q.slcExternal!=undefined)?q.slcExternal:false;var l=(q!=undefined&&q.slcId!=undefined)?q.slcId:null;var m=(q!=undefined&&q.pgIndex!=undefined)?q.pgIndex:null;function c(){if(p!=undefined){switch(p){case b.Evt.name.filter:(b.isModFilterFn)?b.modFilterFn.call(null,b):b._Filter();break;case b.Evt.name.populateselect:(b.refreshFilters)?b._PopulateSelect(n,true):b._PopulateSelect(n,false,d,l);break;case b.Evt.name.populatechecklist:b._PopulateCheckList(n,d,l);break;case b.Evt.name.changepage:b._ChangePage(m);break;case b.Evt.name.clear:b._ClearFilters();b._Filter();break;case b.Evt.name.changeresultsperpage:b._ChangeResultsPerPage();break;case b.Evt.name.resetvalues:b._ResetValues();b._Filter();break;case b.Evt.name.resetpage:b._ResetPage(b.pgNbCookie);break;case b.Evt.name.resetpagelength:b._ResetPageLength(b.pgLenCookie);break;case b.Evt.name.sort:void (0);break;case b.Evt.name.loadextensions:b._LoadExtensions();break;case b.Evt.name.loadthemes:b._LoadThemes();break;default:b["_"+p].call(null,b,q);break}}if(b.status||b.statusBar){b.StatusMsg("")}if(b.loader){b.ShowLoader("none")}}if(this.loader||this.status||this.statusBar){try{this.ShowLoader("");this.StatusMsg(b["msg"+p])}catch(g){}window.setTimeout(c,this.execDelay)}else{c()}},ImportModule:function(b){if(!b.path||!b.name){return}this.IncludeFile(b.name,b.path,b.init)},LoadExtensions:function(){if(!this.Ext){var b=this;this.Ext={list:{},add:function(m,e,d,c){var g=d.split("/")[d.split("/").length-1];var l=new RegExp(g);var n=d.replace(l,"");b.Ext.list[m]={name:m,description:e,file:g,path:n,callback:c}}}}this.EvtManager(this.Evt.name.loadextensions)},_LoadExtensions:function(){if(!this.hasExtensions){return}if(tf_IsArray(this.extensions.name)&&tf_IsArray(this.extensions.src)){var g=this.extensions;for(var m=0;m<g.name.length;m++){var b=g.src[m];var l=g.name[m];var d=(g.initialize&&g.initialize[m])?g.initialize[m]:null;var c=(g.description&&g.description[m])?g.description[m]:null;this.Ext.add(l,c,b,d);if(tf_IsImported(b)){d.call(null,this)}else{this.IncludeFile(l,b,d)}}}},LoadThemes:function(){this.EvtManager(this.Evt.name.loadthemes)},_LoadThemes:function(){if(!this.hasThemes){return}if(!this.Thm){var m=this;this.Thm={list:{},add:function(n,r,q,t){var o=q.split("/")[q.split("/").length-1];var p=new RegExp(o);var s=q.replace(p,"");m.Thm.list[n]={name:n,description:r,file:o,path:s,callback:t}}}}if(this.enableDefaultTheme){this.themes={name:["DefaultTheme"],src:[this.themesPath+"Default/TF_Default.css"],description:["Default Theme"]};this.Thm.add("DefaultTheme",this.themesPath+"Default/TF_Default.css","Default Theme")}if(tf_IsArray(this.themes.name)&&tf_IsArray(this.themes.src)){var l=this.themes;for(var c=0;c<l.name.length;c++){var d=l.src[c];var b=l.name[c];var g=(l.initialize&&l.initialize[c])?l.initialize[c]:null;var e=(l.description&&l.description[c])?l.description[c]:null;this.Thm.add(b,e,d,g);if(!tf_IsImported(d,"link")){this.IncludeFile(b,d,null,"link")}if(tf_IsFn(g)){g.call(null,this)}}}this.btnResetText=null;this.btnResetHtml='<input type="button" value="" class="'+this.btnResetCssClass+'" title="Clear filters" />';this.btnPrevPageHtml='<input type="button" value="" class="'+this.btnPageCssClass+' previousPage" title="Previous page" />';this.btnNextPageHtml='<input type="button" value="" class="'+this.btnPageCssClass+' nextPage" title="Next page" />';this.btnFirstPageHtml='<input type="button" value="" class="'+this.btnPageCssClass+' firstPage" title="First page" />';this.btnLastPageHtml='<input type="button" value="" class="'+this.btnPageCssClass+' lastPage" title="Last page" />';this.loader=true;this.loaderHtml='<div class="defaultLoader"></div>';this.loaderText=null},RemoveGrid:function(){if(this.fltGrid&&this.hasGrid){var d=this.tbl.rows;if(this.paging){this.RemovePaging()}if(this.statusBar){this.RemoveStatusBar()}if(this.rowsCounter){this.RemoveRowsCounter()}if(this.btnReset){this.RemoveResetBtn()}if(this.helpInstructions||this.helpInstructions==null){this.RemoveHelpInstructions()}if(this.paging){this.RemoveResultsPerPage()}if(this.isExternalFlt&&!this.popUpFilters){this.RemoveExternalFlts()}if(this.fixedHeaders){this.RemoveFixedHeaders()}if(this.infDiv){this.RemoveTopDiv()}if(this.highlightKeywords){this.UnhighlightAll()}if(this.sort){this.RemoveSort()}if(this.loader){this.RemoveLoader()}if(this.popUpFilters){this.RemovePopupFilters()}if(this.markActiveColumns){this.ClearActiveColumns()}if(this.editable||this.selectable){this.RemoveEditable()}for(var c=this.refRow;c<this.nbRows;c++){d[c].style.display="";try{if(d[c].hasAttribute("validRow")){d[c].removeAttribute("validRow")}}catch(g){for(var b=0;b<d[c].attributes.length;b++){if(d[c].attributes[b].nodeName.tf_LCase()=="validrow"){d[c].removeAttribute("validRow")}}}if(this.alternateBgs){this.RemoveRowBg(c)}}if(this.fltGrid&&!this.gridLayout){this.fltGridEl=d[this.filtersRowIndex];this.tbl.deleteRow(this.filtersRowIndex)}if(this.gridLayout){this.RemoveGridLayout()}tf_RemoveClass(this.tbl,this.prfxTf);this.activeFlt=null;this.isStartBgAlternate=true;this.hasGrid=false}},SetTopDiv:function(){if(this.infDiv!=null){return}var d=tf_CreateElm("div",["id",this.prfxInfDiv+this.id]);d.className=this.infDivCssClass;if(this.toolBarTgtId){tf_Id(this.toolBarTgtId).appendChild(d)}else{if(this.fixedHeaders&&this.contDiv){this.contDiv.parentNode.insertBefore(d,this.contDiv)}else{if(this.gridLayout){this.tblMainCont.appendChild(d);d.className=this.gridInfDivCssClass}else{this.tbl.parentNode.insertBefore(d,this.tbl)}}}this.infDiv=tf_Id(this.prfxInfDiv+this.id);var c=tf_CreateElm("div",["id",this.prfxLDiv+this.id]);c.className=this.lDivCssClass;d.appendChild(c);this.lDiv=tf_Id(this.prfxLDiv+this.id);var e=tf_CreateElm("div",["id",this.prfxRDiv+this.id]);e.className=this.rDivCssClass;d.appendChild(e);this.rDiv=tf_Id(this.prfxRDiv+this.id);var b=tf_CreateElm("div",["id",this.prfxMDiv+this.id]);b.className=this.mDivCssClass;d.appendChild(b);this.mDiv=tf_Id(this.prfxMDiv+this.id);if(this.helpInstructions==null){this.SetHelpInstructions()}},RemoveTopDiv:function(){if(this.infDiv==null){return}this.infDiv.parentNode.removeChild(this.infDiv);this.infDiv=null},RemoveExternalFlts:function(){if(!this.isExternalFlt&&!this.externalFltTgtIds){return}for(var b=0;b<this.externalFltTgtIds.length;b++){if(tf_Id(this.externalFltTgtIds[b])){tf_Id(this.externalFltTgtIds[b]).innerHTML=""}}},SetLoader:function(){if(this.loaderDiv!=null){return}var b=this.fObj;this.loaderTgtId=b.loader_target_id!=undefined?b.loader_target_id:null;this.loaderDiv=null;this.loaderText=b.loader_text!=undefined?b.loader_text:"Loading...";this.loaderHtml=b.loader_html!=undefined?b.loader_html:null;this.loaderCssClass=b.loader_css_class!=undefined?b.loader_css_class:"loader";this.loaderCloseDelay=200;this.onShowLoader=tf_IsFn(b.on_show_loader)?b.on_show_loader:null;this.onHideLoader=tf_IsFn(b.on_hide_loader)?b.on_hide_loader:null;var d=tf_CreateElm("div",["id",this.prfxLoader+this.id]);d.className=this.loaderCssClass;var c=(this.loaderTgtId==null)?(this.gridLayout?this.tblCont:this.tbl.parentNode):tf_Id(this.loaderTgtId);if(this.loaderTgtId==null){c.insertBefore(d,this.tbl)}else{c.appendChild(d)}this.loaderDiv=tf_Id(this.prfxLoader+this.id);if(this.loaderHtml==null){this.loaderDiv.appendChild(tf_CreateText(this.loaderText))}else{this.loaderDiv.innerHTML=this.loaderHtml}},RemoveLoader:function(){if(this.loaderDiv==null){return}var b=(this.loaderTgtId==null)?(this.gridLayout?this.tblCont:this.tbl.parentNode):tf_Id(this.loaderTgtId);b.removeChild(this.loaderDiv);this.loaderDiv=null},ShowLoader:function(d){if(!this.loader||!this.loaderDiv){return}if(this.loaderDiv.style.display==d){return}var e=this;function c(){if(!e.loaderDiv){return}if(e.onShowLoader&&d!="none"){e.onShowLoader.call(null,e)}e.loaderDiv.style.display=d;if(e.onHideLoader&&d=="none"){e.onHideLoader.call(null,e)}}var b=(d=="none")?this.loaderCloseDelay:1;window.setTimeout(c,b)},SetSort:function(){var b=this.Evt._EnableSort;if(!tf_IsFn(b)){var c=this;this.Evt._EnableSort=function(){if(c.isSortEnabled&&!c.gridLayout){return}if(tf_IsImported(c.sortConfig.adapterSrc)){c.sortConfig.initialize.call(null,c)}else{c.IncludeFile(c.sortConfig.name+"_adapter",c.sortConfig.adapterSrc,function(){c.sortConfig.initialize.call(null,c)})}}}if(tf_IsImported(this.sortConfig.src)){this.Evt._EnableSort()}else{this.IncludeFile(this.sortConfig.name,this.sortConfig.src,this.Evt._EnableSort)}},RemoveSort:function(){if(!this.sort){return}this.sort=false},Sort:function(){this.EvtManager(this.Evt.name.sort)},SetEditable:function(){if(tf_IsImported(this.ezEditTableConfig.src)){this._EnableEditable()}else{this.IncludeFile(this.ezEditTableConfig.name,this.ezEditTableConfig.src,this._EnableEditable)}if(this.ezEditTableConfig.loadStylesheet&&!tf_IsImported(this.ezEditTableConfig.stylesheet,"link")){this.IncludeFile(this.ezEditTableConfig.stylesheetName,this.ezEditTableConfig.stylesheet,null,"link")}},RemoveEditable:function(){if(this.ezEditTable){if(this.selectable){this.ezEditTable.Selection.ClearSelections();this.ezEditTable.Selection.Remove()}if(this.editable){this.ezEditTable.Editable.Remove()}}},ResetEditable:function(){if(this.ezEditTable){if(this.selectable){this.ezEditTable.Selection.Set()}if(this.editable){this.ezEditTable.Editable.Set()}}},_EnableEditable:function(d){if(!d){d=this}var m;var g=tf_Tag(d.tbl,"thead");if(g.length>0&&!d.ezEditTableConfig.startRow){m=undefined}else{m=d.ezEditTableConfig.startRow||d.refRow}d.ezEditTableConfig.scroll_into_view=d.ezEditTableConfig.scroll_into_view!=undefined?d.ezEditTableConfig.scroll_into_view:true;d.ezEditTableConfig.base_path=d.ezEditTableConfig.base_path!=undefined?d.ezEditTableConfig.base_path:d.basePath+"ezEditTable/";d.ezEditTableConfig.editable=d.editable=d.fObj.editable;d.ezEditTableConfig.selection=d.selectable=d.fObj.selectable;if(d.selectable){d.ezEditTableConfig.default_selection=d.ezEditTableConfig.default_selection!=undefined?d.ezEditTableConfig.default_selection:"row"}d.ezEditTableConfig.active_cell_css=d.ezEditTableConfig.active_cell_css!=undefined?d.ezEditTableConfig.active_cell_css:"ezETSelectedCell";d._lastValidRowIndex=0;d._lastRowIndex=0;if(d.selectable){function l(x,o,q){if(!d.validRowsIndex){return}var B=x.defaultSelection!="row"?o.parentNode:o;var z=o.nodeName=="TD"?o:null;var A=q!=undefined?x.Event.GetKey(q):0;var s=d.validRowsIndex.tf_Has(B.rowIndex);var u;var r=(A==34||A==33?(d.pagingLength||x.nbRowsPerPage):1);if(!s){if(B.rowIndex>d._lastRowIndex){if(B.rowIndex>=d.validRowsIndex[d.validRowsIndex.length-1]){u=d.validRowsIndex[d.validRowsIndex.length-1]}else{var t=(d._lastValidRowIndex+r);if(t>(d.validRowsIndex.length-1)){u=d.validRowsIndex[d.validRowsIndex.length-1]}else{u=d.validRowsIndex[t]}}}else{if(B.rowIndex<=d.validRowsIndex[0]){u=d.validRowsIndex[0]}else{var y=d.validRowsIndex[d._lastValidRowIndex-r];u=y?y:d.validRowsIndex[0]}}d._lastRowIndex=B.rowIndex;w(u)}else{if(A!=34&&A!=33){d._lastValidRowIndex=d.validRowsIndex.tf_IndexByValue(B.rowIndex);d._lastRowIndex=B.rowIndex}else{if(A==34){if((d._lastValidRowIndex+r)<=(d.validRowsIndex.length-1)){u=d.validRowsIndex[d._lastValidRowIndex+r]}else{u=d.validRowsIndex[d.validRowsIndex.length-1]}}else{if((d._lastValidRowIndex-r)<=(d.validRowsIndex[0])){u=d.validRowsIndex[0]}else{u=d.validRowsIndex[d._lastValidRowIndex-r]}}d._lastRowIndex=u;d._lastValidRowIndex=d.validRowsIndex.tf_IndexByValue(u);w(u)}}function w(C){if(x.defaultSelection=="row"){x.Selection.SelectRowByIndex(C)}else{x.ClearSelections();var v=o.cellIndex;var D=d.tbl.rows[C];if(x.defaultSelection=="both"){x.Selection.SelectRowByIndex(C)}if(D){x.Selection.SelectCell(D.cells[v])}}if(d.validRowsIndex.length!=d.GetRowsNb()){var D=d.tbl.rows[C];if(D){D.scrollIntoView(false)}if(z){if(z.cellIndex==(d.GetCellsNb()-1)&&d.gridLayout){d.tblCont.scrollLeft=100000000}else{if(z.cellIndex==0&&d.gridLayout){d.tblCont.scrollLeft=0}else{z.scrollIntoView(false)}}}}}}function e(s,o,r){var t=s.defaultSelection!="row"?o.parentNode:o;if(d.paging){if(d.nbPages>1){s.nbRowsPerPage=d.pagingLength;var q=parseInt(d.startPagingRow)+parseInt(d.pagingLength);var u=t.rowIndex;if((u==d.validRowsIndex[d.validRowsIndex.length-1])&&d.currentPageNb!=d.nbPages){d.SetPage("last")}else{if((u==d.validRowsIndex[0])&&d.currentPageNb!=1){d.SetPage("first")}else{if(u>d.validRowsIndex[q-1]&&u<d.validRowsIndex[d.validRowsIndex.length-1]){d.SetPage("next")}else{if(u<d.validRowsIndex[d.startPagingRow]&&u>d.validRowsIndex[0]){d.SetPage("previous")}}}}}}}if(d.paging){d.onAfterChangePage=function(r,q){var s=r.ezEditTable.Selection.GetActiveRow();if(s){s.scrollIntoView(false)}var o=r.ezEditTable.Selection.GetActiveCell();if(o){o.scrollIntoView(false)}}}if(d.ezEditTableConfig.default_selection=="row"){var b=d.ezEditTableConfig.on_before_selected_row;d.ezEditTableConfig.on_before_selected_row=function(){e(arguments[0],arguments[1],arguments[2]);if(b){b.call(null,arguments[0],arguments[1],arguments[2])}};var c=d.ezEditTableConfig.on_after_selected_row;d.ezEditTableConfig.on_after_selected_row=function(){l(arguments[0],arguments[1],arguments[2]);if(c){c.call(null,arguments[0],arguments[1],arguments[2])}}}else{var b=d.ezEditTableConfig.on_before_selected_cell;d.ezEditTableConfig.on_before_selected_cell=function(){e(arguments[0],arguments[1],arguments[2]);if(b){b.call(null,arguments[0],arguments[1],arguments[2])}};var c=d.ezEditTableConfig.on_after_selected_cell;d.ezEditTableConfig.on_after_selected_cell=function(){l(arguments[0],arguments[1],arguments[2]);if(c){c.call(null,arguments[0],arguments[1],arguments[2])}}}}if(d.editable){var p=d.ezEditTableConfig.on_added_dom_row;d.ezEditTableConfig.on_added_dom_row=function(){d.nbFilterableRows++;if(!d.paging){d.RefreshNbRows()}else{d.nbRows++;d.nbVisibleRows++;d.nbFilterableRows++;d.paging=false;d.RemovePaging();d.AddPaging(false)}if(d.alternateBgs){d.SetAlternateRows()}if(p){p.call(null,arguments[0],arguments[1],arguments[2])}};if(d.ezEditTableConfig.actions&&d.ezEditTableConfig.actions["delete"]){var n=d.ezEditTableConfig.actions["delete"].on_after_submit;d.ezEditTableConfig.actions["delete"].on_after_submit=function(){d.nbFilterableRows--;if(!d.paging){d.RefreshNbRows()}else{d.nbRows--;d.nbVisibleRows--;d.nbFilterableRows--;d.paging=false;d.RemovePaging();d.AddPaging(false)}if(d.alternateBgs){d.SetAlternateRows()}if(n){n.call(null,arguments[0],arguments[1])}}}}d.ezEditTable=new EditTable(d.id,d.ezEditTableConfig,m);d.ezEditTable.Init()},SetPaging:function(){if(!this.hasGrid&&!this.isFirstLoad){return}if(!this.paging||(!this.isPagingRemoved&&!this.isFirstLoad)){return}var t=this.fObj;this.pagingTgtId=t.paging_target_id!=undefined?t.paging_target_id:null;this.pagingLength=t.paging_length!=undefined?t.paging_length:10;this.resultsPerPageTgtId=t.results_per_page_target_id!=undefined?t.results_per_page_target_id:null;this.pgSlcCssClass=t.paging_slc_css_class!=undefined?t.paging_slc_css_class:"pgSlc";this.pgInpCssClass=t.paging_inp_css_class!=undefined?t.paging_inp_css_class:"pgNbInp";this.resultsSlcCssClass=t.results_slc_css_class!=undefined?t.results_slc_css_class:"rspg";this.resultsSpanCssClass=t.results_span_css_class!=undefined?t.results_span_css_class:"rspgSpan";this.nbVisibleRows=0;this.nbHiddenRows=0;this.startPagingRow=0;this.nbPages=0;this.btnNextPageText=t.btn_next_page_text!=undefined?t.btn_next_page_text:">";this.btnPrevPageText=t.btn_prev_page_text!=undefined?t.btn_prev_page_text:"<";this.btnLastPageText=t.btn_last_page_text!=undefined?t.btn_last_page_text:">|";this.btnFirstPageText=t.btn_first_page_text!=undefined?t.btn_first_page_text:"|<";this.btnNextPageHtml=t.btn_next_page_html!=undefined?t.btn_next_page_html:(!this.enableIcons?null:'<input type="button" value="" class="'+this.btnPageCssClass+' nextPage" title="Next page" />');this.btnPrevPageHtml=t.btn_prev_page_html!=undefined?t.btn_prev_page_html:(!this.enableIcons?null:'<input type="button" value="" class="'+this.btnPageCssClass+' previousPage" title="Previous page" />');this.btnFirstPageHtml=t.btn_first_page_html!=undefined?t.btn_first_page_html:(!this.enableIcons?null:'<input type="button" value="" class="'+this.btnPageCssClass+' firstPage" title="First page" />');this.btnLastPageHtml=t.btn_last_page_html!=undefined?t.btn_last_page_html:(!this.enableIcons?null:'<input type="button" value="" class="'+this.btnPageCssClass+' lastPage" title="Last page" />');this.pageText=t.page_text!=undefined?t.page_text:" Page ";this.ofText=t.of_text!=undefined?t.of_text:" of ";this.nbPgSpanCssClass=t.nb_pages_css_class!=undefined?t.nb_pages_css_class:"nbpg";this.hasPagingBtns=t.paging_btns==false?false:true;this.pagingBtnEvents=null;this.pageSelectorType=t.page_selector_type!=undefined?t.page_selector_type:this.fltTypeSlc;this.onBeforeChangePage=tf_IsFn(t.on_before_change_page)?t.on_before_change_page:null;this.onAfterChangePage=tf_IsFn(t.on_after_change_page)?t.on_after_change_page:null;var u=this.refRow;var r=this.nbRows;this.nbPages=Math.ceil((r-u)/this.pagingLength);if(!this.Evt._Paging.next){var l=this;this.Evt._Paging={slcIndex:function(){return(l.pageSelectorType==l.fltTypeSlc)?l.pagingSlc.options.selectedIndex:parseInt(l.pagingSlc.value)-1},nbOpts:function(){return(l.pageSelectorType==l.fltTypeSlc)?parseInt(l.pagingSlc.options.length)-1:(l.nbPages-1)},next:function(){if(l.Evt._Paging.nextEvt){l.Evt._Paging.nextEvt()}var o=(l.Evt._Paging.slcIndex()<l.Evt._Paging.nbOpts())?l.Evt._Paging.slcIndex()+1:0;l.ChangePage(o)},prev:function(){if(l.Evt._Paging.prevEvt){l.Evt._Paging.prevEvt()}var o=l.Evt._Paging.slcIndex()>0?l.Evt._Paging.slcIndex()-1:l.Evt._Paging.nbOpts();l.ChangePage(o)},last:function(){if(l.Evt._Paging.lastEvt){l.Evt._Paging.lastEvt()}l.ChangePage(l.Evt._Paging.nbOpts())},first:function(){if(l.Evt._Paging.firstEvt){l.Evt._Paging.firstEvt()}l.ChangePage(0)},_detectKey:function(z){var o=(z)?z:(window.event)?window.event:null;if(o){var y=(o.charCode)?o.charCode:((o.keyCode)?o.keyCode:((o.which)?o.which:0));if(y=="13"){if(l.sorted){l.Filter();l.ChangePage(l.Evt._Paging.slcIndex())}else{l.ChangePage()}this.blur()}}},nextEvt:null,prevEvt:null,lastEvt:null,firstEvt:null}}if(!this.Evt._OnSlcPagesChange){this.Evt._OnSlcPagesChange=function(){if(l.Evt._Paging._OnSlcPagesChangeEvt){l.Evt._Paging._OnSlcPagesChangeEvt()}l.ChangePage();this.blur();if(this.parentNode&&tf_isIE){this.parentNode.focus()}}}if(this.pageSelectorType==this.fltTypeSlc){var q=tf_CreateElm(this.fltTypeSlc,["id",this.prfxSlcPages+this.id]);q.className=this.pgSlcCssClass;q.onchange=this.Evt._OnSlcPagesChange}if(this.pageSelectorType==this.fltTypeInp){var q=tf_CreateElm(this.fltTypeInp,["id",this.prfxSlcPages+this.id],["value",this.currentPageNb]);q.className=this.pgInpCssClass;q.onkeypress=this.Evt._Paging._detectKey}var p,c,d,g;p=tf_CreateElm("span",["id",this.prfxBtnNextSpan+this.id]);c=tf_CreateElm("span",["id",this.prfxBtnPrevSpan+this.id]);d=tf_CreateElm("span",["id",this.prfxBtnLastSpan+this.id]);g=tf_CreateElm("span",["id",this.prfxBtnFirstSpan+this.id]);if(this.hasPagingBtns){if(this.btnNextPageHtml==null){var e=tf_CreateElm(this.fltTypeInp,["id",this.prfxBtnNext+this.id],["type","button"],["value",this.btnNextPageText],["title","Next"]);e.className=this.btnPageCssClass;e.onclick=this.Evt._Paging.next;p.appendChild(e)}else{p.innerHTML=this.btnNextPageHtml;p.onclick=this.Evt._Paging.next}if(this.btnPrevPageHtml==null){var x=tf_CreateElm(this.fltTypeInp,["id",this.prfxBtnPrev+this.id],["type","button"],["value",this.btnPrevPageText],["title","Previous"]);x.className=this.btnPageCssClass;x.onclick=this.Evt._Paging.prev;c.appendChild(x)}else{c.innerHTML=this.btnPrevPageHtml;c.onclick=this.Evt._Paging.prev}if(this.btnLastPageHtml==null){var s=tf_CreateElm(this.fltTypeInp,["id",this.prfxBtnLast+this.id],["type","button"],["value",this.btnLastPageText],["title","Last"]);s.className=this.btnPageCssClass;s.onclick=this.Evt._Paging.last;d.appendChild(s)}else{d.innerHTML=this.btnLastPageHtml;d.onclick=this.Evt._Paging.last}if(this.btnFirstPageHtml==null){var v=tf_CreateElm(this.fltTypeInp,["id",this.prfxBtnFirst+this.id],["type","button"],["value",this.btnFirstPageText],["title","First"]);v.className=this.btnPageCssClass;v.onclick=this.Evt._Paging.first;g.appendChild(v)}else{g.innerHTML=this.btnFirstPageHtml;g.onclick=this.Evt._Paging.first}}if(this.pagingTgtId==null){this.SetTopDiv()}var w=(this.pagingTgtId==null)?this.mDiv:tf_Id(this.pagingTgtId);if(w.innerHTML!=""){w.innerHTML=""}w.appendChild(g);w.appendChild(c);var n=tf_CreateElm("span",["id",this.prfxPgBeforeSpan+this.id]);n.appendChild(tf_CreateText(this.pageText));n.className=this.nbPgSpanCssClass;w.appendChild(n);w.appendChild(q);var b=tf_CreateElm("span",["id",this.prfxPgAfterSpan+this.id]);b.appendChild(tf_CreateText(this.ofText));b.className=this.nbPgSpanCssClass;w.appendChild(b);var m=tf_CreateElm("span",["id",this.prfxPgSpan+this.id]);m.className=this.nbPgSpanCssClass;m.appendChild(tf_CreateText(" "+this.nbPages+" "));w.appendChild(m);w.appendChild(p);w.appendChild(d);this.pagingSlc=tf_Id(this.prfxSlcPages+this.id);if(!this.rememberGridValues||this.isPagingRemoved){this.SetPagingInfo()}if(!this.fltGrid){this.ValidateAllRows();this.SetPagingInfo(this.validRowsIndex)}this.pagingBtnEvents=this.Evt._Paging;this.isPagingRemoved=false},RemovePaging:function(){if(!this.hasGrid){return}if(this.pagingSlc==null){return}var e,g,b,d;var m,c,l;e=tf_Id(this.prfxBtnNextSpan+this.id);g=tf_Id(this.prfxBtnPrevSpan+this.id);b=tf_Id(this.prfxBtnLastSpan+this.id);d=tf_Id(this.prfxBtnFirstSpan+this.id);m=tf_Id(this.prfxPgBeforeSpan+this.id);c=tf_Id(this.prfxPgAfterSpan+this.id);l=tf_Id(this.prfxPgSpan+this.id);this.pagingSlc.parentNode.removeChild(this.pagingSlc);if(e!=null){e.parentNode.removeChild(e)}if(g!=null){g.parentNode.removeChild(g)}if(b!=null){b.parentNode.removeChild(b)}if(d!=null){d.parentNode.removeChild(d)}if(m!=null){m.parentNode.removeChild(m)}if(c!=null){c.parentNode.removeChild(c)}if(l!=null){l.parentNode.removeChild(l)}this.pagingBtnEvents=null;this.pagingSlc=null;this.isPagingRemoved=true},SetPagingInfo:function(g){var n=this.tbl.rows;var c=(this.pagingTgtId==null)?this.mDiv:tf_Id(this.pagingTgtId);var e=tf_Id(this.prfxPgSpan+this.id);if(g!=undefined){this.validRowsIndex=g}else{this.validRowsIndex=[];for(var d=this.refRow;d<this.nbRows;d++){if(!n[d]){continue}var m=n[d].getAttribute("validRow");if(m=="true"||m==null){this.validRowsIndex.push(d)}}}this.nbPages=Math.ceil(this.validRowsIndex.length/this.pagingLength);e.innerHTML=this.nbPages;if(this.pageSelectorType==this.fltTypeSlc){this.pagingSlc.innerHTML=""}if(this.nbPages>0){c.style.visibility="visible";if(this.pageSelectorType==this.fltTypeSlc){for(var l=0;l<this.nbPages;l++){var b=new Option((l+1),l*this.pagingLength,false,false);this.pagingSlc.options[l]=b}}else{this.pagingSlc.value=this.currentPageNb}}else{c.style.visibility="hidden"}this.GroupByPage(this.validRowsIndex)},GroupByPage:function(d){var e=this.tbl.rows;var b=parseInt(this.startPagingRow)+parseInt(this.pagingLength);if(d!=undefined){this.validRowsIndex=d}for(h=0;h<this.validRowsIndex.length;h++){if(h>=this.startPagingRow&&h<b){var c=e[this.validRowsIndex[h]];if(c.getAttribute("validRow")=="true"||c.getAttribute("validRow")==undefined){c.style.display=""}if(this.alternateBgs){this.SetRowBg(this.validRowsIndex[h],h)}}else{e[this.validRowsIndex[h]].style.display="none";if(this.alternateBgs){this.RemoveRowBg(this.validRowsIndex[h])}}}this.nbVisibleRows=this.validRowsIndex.length;this.isStartBgAlternate=false;this.ApplyGridProps()},SetPage:function(c){if(this.hasGrid&&this.paging){var b=this.pagingBtnEvents,d=typeof c;if(d=="string"){switch(c.tf_LCase()){case"next":b.next();break;case"previous":b.prev();break;case"last":b.last();break;case"first":b.first();break;default:b.next();break}}if(d=="number"){this.ChangePage((c-1))}}},SetResultsPerPage:function(){if(!this.hasGrid&&!this.isFirstLoad){return}if(this.resultsPerPageSlc!=null||this.resultsPerPage==null){return}if(!this.Evt._OnSlcResultsChange){var m=this;this.Evt._OnSlcResultsChange=function(){m.ChangeResultsPerPage();this.blur();if(this.parentNode&&tf_isIE){this.parentNode.focus()}}}var l=tf_CreateElm(this.fltTypeSlc,["id",this.prfxSlcResults+this.id]);l.className=this.resultsSlcCssClass;var d=this.resultsPerPage[0],b=this.resultsPerPage[1];var n=tf_CreateElm("span",["id",this.prfxSlcResultsTxt+this.id]);n.className=this.resultsSpanCssClass;if(this.resultsPerPageTgtId==null){this.SetTopDiv()}var g=(this.resultsPerPageTgtId==null)?this.rDiv:tf_Id(this.resultsPerPageTgtId);n.appendChild(tf_CreateText(d));g.appendChild(n);g.appendChild(l);this.resultsPerPageSlc=tf_Id(this.prfxSlcResults+this.id);for(var e=0;e<b.length;e++){var c=new Option(b[e],b[e],false,false);this.resultsPerPageSlc.options[e]=c}l.onchange=this.Evt._OnSlcResultsChange},RemoveResultsPerPage:function(){if(!this.hasGrid){return}if(this.resultsPerPageSlc==null||this.resultsPerPage==null){return}var b,c;b=this.resultsPerPageSlc;c=tf_Id(this.prfxSlcResultsTxt+this.id);if(b!=null){b.parentNode.removeChild(b)}if(c!=null){c.parentNode.removeChild(c)}this.resultsPerPageSlc=null},SetHelpInstructions:function(){if(this.helpInstrBtnEl!=null){return}var l=this.fObj;this.helpInstrTgtId=l.help_instructions_target_id!=undefined?l.help_instructions_target_id:null;this.helpInstrContTgtId=l.help_instructions_container_target_id!=undefined?l.help_instructions_container_target_id:null;this.helpInstrText=l.help_instructions_text?l.help_instructions_text:"Use the filters above each column to filter and limit table data.";this.helpInstrHtml=l.help_instructions_html!=undefined?l.help_instructions_html:null;this.helpInstrBtnText=l.help_instructions_btn_text!=undefined?l.help_instructions_btn_text:"?";this.helpInstrBtnHtml=l.help_instructions_btn_html!=undefined?l.help_instructions_btn_html:null;this.helpInstrBtnCssClass=l.help_instructions_btn_css_class!=undefined?l.help_instructions_btn_css_class:"helpBtn";this.helpInstrContCssClass=l.help_instructions_container_css_class!=undefined?l.help_instructions_container_css_class:"helpCont";this.helpInstrBtnEl=null;this.helpInstrContEl=null;this.helpInstrDefaultHtml='<div class="helpFooter"><span>HTML Table Filter Generator</span> <span>v. '+this.version+'</span><br/><a href="http://tablefilter.free.fr" target="_blank">http://tablefilter.free.fr</a><br/><span>&copy;2009-2011 Max Guglielmi.</span><div align="center" style="margin-top:8px;"><a href="javascript:;" onclick="window[\'tf_'+this.id+"']._ToggleHelp();\">Close</a></div></div>";var e=tf_CreateElm("span",["id",this.prfxHelpSpan+this.id]);var b=tf_CreateElm("div",["id",this.prfxHelpDiv+this.id]);if(this.helpInstrTgtId==null){this.SetTopDiv()}var m=(this.helpInstrTgtId==null)?this.rDiv:tf_Id(this.helpInstrTgtId);m.appendChild(e);var c=(this.helpInstrContTgtId==null)?e:tf_Id(this.helpInstrContTgtId);if(this.helpInstrBtnHtml==null){c.appendChild(b);var g=tf_CreateElm("a",["href","javascript:void(0);"]);g.className=this.helpInstrBtnCssClass;g.appendChild(tf_CreateText(this.helpInstrBtnText));e.appendChild(g);g.onclick=this.Evt._OnHelpBtnClick}else{e.innerHTML=this.helpInstrBtnHtml;var d=e.firstChild;d.onclick=this.Evt._OnHelpBtnClick;c.appendChild(b)}if(this.helpInstrHtml==null){b.appendChild(tf_CreateText(this.helpInstrText));b.className=this.helpInstrContCssClass;b.ondblclick=this.Evt._OnHelpBtnClick}else{if(this.helpInstrContTgtId){c.appendChild(b)}b.innerHTML=this.helpInstrHtml;if(!this.helpInstrContTgtId){b.className=this.helpInstrContCssClass;b.ondblclick=this.Evt._OnHelpBtnClick}}b.innerHTML+=this.helpInstrDefaultHtml;this.helpInstrContEl=b;this.helpInstrBtnEl=e},RemoveHelpInstructions:function(){if(this.helpInstrBtnEl==null){return}this.helpInstrBtnEl.parentNode.removeChild(this.helpInstrBtnEl);this.helpInstrBtnEl=null;if(this.helpInstrContEl==null){return}this.helpInstrContEl.parentNode.removeChild(this.helpInstrContEl);this.helpInstrContEl=null},_ToggleHelp:function(){if(!this.helpInstrContEl){return}var c=this.helpInstrContEl.style.display;if(c==""||c=="none"){this.helpInstrContEl.style.display="block";var b=tf_ObjPosition(this.helpInstrBtnEl,[this.helpInstrBtnEl.nodeName])[0];if(!this.helpInstrContTgtId){this.helpInstrContEl.style.left=(b-this.helpInstrContEl.clientWidth+25)+"px"}}else{this.helpInstrContEl.style.display="none"}},ChangePage:function(b){this.EvtManager(this.Evt.name.changepage,{pgIndex:b})},_ChangePage:function(b){if(!this.paging){return}if(b==undefined){b=(this.pageSelectorType==this.fltTypeSlc)?this.pagingSlc.options.selectedIndex:(this.pagingSlc.value-1)}if(b>=0&&b<=(this.nbPages-1)){if(this.onBeforeChangePage){this.onBeforeChangePage.call(null,this,b)}this.currentPageNb=parseInt(b)+1;if(this.pageSelectorType==this.fltTypeSlc){this.pagingSlc.options[b].selected=true}else{this.pagingSlc.value=this.currentPageNb}if(this.rememberPageNb){this.RememberPageNb(this.pgNbCookie)}this.startPagingRow=(this.pageSelectorType==this.fltTypeSlc)?this.pagingSlc.value:(b*this.pagingLength);this.GroupByPage();if(this.onAfterChangePage){this.onAfterChangePage.call(null,this,b)}}},ChangeResultsPerPage:function(){this.EvtManager(this.Evt.name.changeresultsperpage)},_ChangeResultsPerPage:function(){if(!this.paging){return}var d=this.resultsPerPageSlc;var b=(this.pageSelectorType==this.fltTypeSlc)?this.pagingSlc.selectedIndex:parseInt(this.pagingSlc.value-1);this.pagingLength=parseInt(d.options[d.selectedIndex].value);this.startPagingRow=this.pagingLength*b;if(!isNaN(this.pagingLength)){if(this.startPagingRow>=this.nbFilterableRows){this.startPagingRow=(this.nbFilterableRows-this.pagingLength)}this.SetPagingInfo();if(this.pageSelectorType==this.fltTypeSlc){var c=(this.pagingSlc.options.length-1<=b)?(this.pagingSlc.options.length-1):b;this.pagingSlc.options[c].selected=true}if(this.rememberPageLen){this.RememberPageLength(this.pgLenCookie)}}},ResetPage:function(b){this.EvtManager(this.Evt.name.resetpage)},_ResetPage:function(c){var b=tf_ReadCookie(c);if(b!=""){this.ChangePage((b-1))}},ResetPageLength:function(b){this.EvtManager(this.Evt.name.resetpagelength)},_ResetPageLength:function(c){if(!this.paging){return}var b=tf_ReadCookie(c);if(b!=""){this.resultsPerPageSlc.options[b].selected=true;this.ChangeResultsPerPage()}},AddPaging:function(b){if(!this.hasGrid||this.paging){return}this.paging=true;this.isPagingRemoved=true;this.SetPaging();this.ResetValues();if(b){this.Filter()}},PopulateSelect:function(c,d,b){this.EvtManager(this.Evt.name.populateselect,{slcIndex:c,slcExternal:d,slcId:b})},_PopulateSelect:function(u,d,v,c){v=(v==undefined)?false:v;var s=this.fltIds[u];if(tf_Id(s)==null&&!v){return}if(tf_Id(c)==null&&v){return}var g=(!v)?tf_Id(s):tf_Id(c);var w=this,l=this.tbl.rows;var E=this.slcFillingMethod.tf_LCase();var t=[],D="",J;var p=(this.hasCustomSlcOptions&&this.customSlcOptions.cols.tf_Has(u));var I=[];var F;if(d&&this.activeFilterId){F=this.activeFilterId.split("_")[0];F=F.split(this.prfxFlt)[1]}var q=[],B=[];if(this.rememberGridValues){q=tf_CookieValueArray(this.fltsValuesCookie,this.separator);if(q!=undefined&&q.toString().tf_Trim()!=""){if(this.hasCustomSlcOptions&&this.customSlcOptions.cols.tf_Has(u)){B.push(q[u])}else{B=q[u].split(" "+w.orOperator+" ")}}}var r=null,H=null;if(d&&this.disableExcludedOptions){r=[];H=[]}for(var A=this.refRow;A<this.nbRows;A++){if(this.hasVisibleRows&&this.visibleRows.tf_Has(A)&&!this.paging){continue}var b=l[A].cells;var x=b.length;if(x==this.nbCells&&!p){for(var C=0;C<x;C++){if((u==C&&(!d||(d&&this.disableExcludedOptions)))||(u==C&&d&&((l[A].style.display==""&&!this.paging)||(this.paging&&(!this.validRowsIndex||(this.validRowsIndex&&this.validRowsIndex.tf_Has(A)))&&((F==undefined||F==u)||(F!=u&&this.validRowsIndex.tf_Has(A))))))){var n=this.GetCellData(C,b[C]);var z=n.tf_MatchCase(this.matchCase);if(!t.tf_Has(z,this.matchCase)){t.push(n)}if(d&&this.disableExcludedOptions){if(!H[C]){H[C]=this.GetFilteredDataCol(C)}if(!H[C].tf_Has(z,this.matchCase)&&!r.tf_Has(z,this.matchCase)&&!this.isFirstLoad){r.push(n)}}}}}}if(p){var y=this.__getCustomValues(u);t=y[0];I=y[1]}if(this.sortSlc&&!p){if(!this.matchCase){t.sort(tf_IgnoreCaseSort);if(r){r.sort(tf_IgnoreCaseSort)}}else{t.sort();if(r){r.sort()}}}if(this.sortNumAsc&&this.sortNumAsc.tf_Has(u)){try{t.sort(tf_NumSortAsc);if(r){r.sort(tf_NumSortAsc)}if(p){I.sort(tf_NumSortAsc)}}catch(G){t.sort();if(r){r.sort()}if(p){I.sort()}}}if(this.sortNumDesc&&this.sortNumDesc.tf_Has(u)){try{t.sort(tf_NumSortDesc);if(r){r.sort(tf_NumSortDesc)}if(p){I.sort(tf_NumSortDesc)}}catch(G){t.sort();if(r){r.sort()}if(p){I.sort()}}}K();function m(){if(E=="innerhtml"){D+='<option value="">'+w.displayAllText+"</option>"}else{var L=tf_CreateOpt((!w.enableSlcResetFilter?"":w.displayAllText),"");if(!w.enableSlcResetFilter){L.style.display="none"}g.appendChild(L);if(w.enableEmptyOption){var o=tf_CreateOpt(w.emptyText,w.emOperator);g.appendChild(o)}if(w.enableNonEmptyOption){var e=tf_CreateOpt(w.nonEmptyText,w.nmOperator);g.appendChild(e)}}}function K(){var o=g.value;g.innerHTML="";m();for(var P=0;P<t.length;P++){if(t[P]==""){continue}var O=t[P];var M=(p)?I[P]:t[P];var e=false;if(d&&w.disableExcludedOptions&&r.tf_Has(O.tf_MatchCase(w.matchCase),w.matchCase)){e=true}if(E=="innerhtml"){var N="";if(w.fillSlcOnDemand&&o==t[P]){N='selected="selected"'}D+='<option value="'+O+'" '+N+(e?'disabled="disabled"':"")+">"+M+"</option>"}else{var L;if(w.fillSlcOnDemand&&o==t[P]&&w["col"+u]==w.fltTypeSlc){L=tf_CreateOpt(M,O,true)}else{if(w["col"+u]!=w.fltTypeMulti){L=tf_CreateOpt(M,O,(q[u]!=" "&&O==q[u])?true:false)}else{L=tf_CreateOpt(M,O,(B.tf_Has(t[P].tf_MatchCase(w.matchCase),w.matchCase)||B.toString().indexOf(O)!=-1)?true:false)}}if(e){L.disabled=true}g.appendChild(L)}}if(E=="innerhtml"){g.innerHTML+=D}g.setAttribute("filled","1")}},__deferMultipleSelection:function(e,b,d){if(e.nodeName.tf_LCase()!="select"){return}var c=(d==undefined)?false:d;var g=this;window.setTimeout(function(){e.options[0].selected=false;if(e.options[b].value==""){e.options[b].selected=false}else{e.options[b].selected=true}if(c){g.Filter()}},0.1)},__getCustomValues:function(n){if(n==undefined){return}var m=(this.hasCustomSlcOptions&&this.customSlcOptions.cols.tf_Has(n));if(!m){return}var d=[],g=[];var e=this.customSlcOptions.cols.tf_IndexByValue(n);var o=this.customSlcOptions.values[e];var c=this.customSlcOptions.texts[e];var l=this.customSlcOptions.sorts[e];for(var b=0;b<o.length;b++){g.push(o[b]);if(c[b]!=undefined){d.push(c[b])}else{d.push(o[b])}}if(l){g.sort();d.sort()}return[g,d]},PopulateCheckList:function(b,c,d){this.EvtManager(this.Evt.name.populatechecklist,{slcIndex:b,slcExternal:c,slcId:d})},_PopulateCheckList:function(t,v,u){v=(v==undefined)?false:v;var g=this.prfxCheckListDiv+t+"_"+this.id;if(tf_Id(g)==null&&!v){return}if(tf_Id(u)==null&&v){return}var C=(!v)?this.checkListDiv[t]:tf_Id(u);var q=tf_CreateElm("ul",["id",this.fltIds[t]],["colIndex",t]);q.className=this.checkListCssClass;q.onchange=this.Evt._OnCheckListChange;var w=this,d=this.tbl.rows;var s=[];var p=(this.hasCustomSlcOptions&&this.customSlcOptions.cols.tf_Has(t));var I=[];var G;if(this.refreshFilters&&this.activeFilterId){G=this.activeFilterId.split("_")[0];G=G.split(this.prfxFlt)[1]}var r=null,J=null;if(this.refreshFilters&&this.disableExcludedOptions){r=[];J=[]}for(var D=this.refRow;D<this.nbRows;D++){if(this.hasVisibleRows&&this.visibleRows.tf_Has(D)&&!this.paging){continue}var b=d[D].cells;var A=b.length;if(A==this.nbCells&&!p){for(var F=0;F<A;F++){if((t==F&&(!this.refreshFilters||(this.refreshFilters&&this.disableExcludedOptions)))||(t==F&&this.refreshFilters&&((d[D].style.display==""&&!this.paging)||(this.paging&&((G==undefined||G==t)||(G!=t&&this.validRowsIndex.tf_Has(D))))))){var l=this.GetCellData(F,b[F]);var z=l.tf_MatchCase(this.matchCase);if(!s.tf_Has(z,this.matchCase)){s.push(l)}if(this.refreshFilters&&this.disableExcludedOptions){if(!J[F]){J[F]=this.GetFilteredDataCol(F)}if(!J[F].tf_Has(z,this.matchCase)&&!r.tf_Has(z,this.matchCase)&&!this.isFirstLoad){r.push(l)}}}}}}if(p){var y=this.__getCustomValues(t);s=y[0];I=y[1]}if(this.sortSlc&&!p){if(!this.matchCase){s.sort(tf_IgnoreCaseSort);if(r){r.sort(tf_IgnoreCaseSort)}}else{s.sort();if(r){r.sort()}}}if(this.sortNumAsc&&this.sortNumAsc.tf_Has(t)){try{s.sort(tf_NumSortAsc);if(r){r.sort(tf_NumSortAsc)}if(p){I.sort(tf_NumSortAsc)}}catch(H){s.sort();if(r){r.sort()}if(p){I.sort()}}}if(this.sortNumDesc&&this.sortNumDesc.tf_Has(t)){try{s.sort(tf_NumSortDesc);if(r){r.sort(tf_NumSortDesc)}if(p){I.sort(tf_NumSortDesc)}}catch(H){s.sort();if(r){r.sort()}if(p){I.sort()}}}E(this.separator);function B(){var o=1;var L=tf_CreateCheckItem(w.fltIds[t]+"_0","",w.displayAllText);L.className=w.checkListItemCssClass;q.appendChild(L);L.check.onclick=function(M){w.__setCheckListValues(this);q.onchange.call(null,M)};if(!w.enableCheckListResetFilter){L.style.display="none"}if(tf_isIE){L.label.onclick=function(){L.check.click()}}if(w.enableEmptyOption){var n=tf_CreateCheckItem(w.fltIds[t]+"_1",w.emOperator,w.emptyText);n.className=w.checkListItemCssClass;q.appendChild(n);n.check.onclick=function(M){w.__setCheckListValues(this);q.onchange.call(null,M)};if(tf_isIE){n.label.onclick=function(){n.check.click()}}o++}if(w.enableNonEmptyOption){var e=tf_CreateCheckItem(w.fltIds[t]+"_2",w.nmOperator,w.nonEmptyText);e.className=w.checkListItemCssClass;q.appendChild(e);e.check.onclick=function(M){w.__setCheckListValues(this);q.onchange.call(null,M)};if(tf_isIE){e.label.onclick=function(){e.check.click()}}o++}return o}function E(M){var o=B();var O=[],n=[];var e=tf_CookieValueByIndex(w.fltsValuesCookie,t,M);if(e!=undefined&&e.tf_Trim().length>0){if(w.hasCustomSlcOptions&&w.customSlcOptions.cols.tf_Has(t)){n.push(e)}else{n=e.split(" "+w.orOperator+" ")}}for(var P=0;P<s.length;P++){var L=s[P];var N=(p)?I[P]:L;var Q=tf_CreateCheckItem(w.fltIds[t]+"_"+(P+o),L,N);Q.className=w.checkListItemCssClass;if(w.refreshFilters&&w.disableExcludedOptions&&r.tf_Has(L.tf_MatchCase(w.matchCase),w.matchCase)){tf_AddClass(Q,w.checkListItemDisabledCssClass);Q.check.disabled=true;Q.disabled=true}else{Q.check.onclick=function(R){w.__setCheckListValues(this);q.onchange.call(null,R)}}q.appendChild(Q);if(L==""){Q.style.display="none"}if(w.rememberGridValues){if((w.hasCustomSlcOptions&&w.customSlcOptions.cols.tf_Has(t)&&n.toString().indexOf(L)!=-1)||n.tf_Has(L.tf_MatchCase(w.matchCase),w.matchCase)){Q.check.checked=true;w.__setCheckListValues(Q.check)}}if(tf_isIE){Q.label.onclick=function(){this.firstChild.click()}}}}if(this.fillSlcOnDemand){C.innerHTML=""}C.appendChild(q);C.setAttribute("filled","1");if(w.rememberGridValues&&tf_isIE){var c=q.getAttribute("indexes");if(c!=null){var m=c.split(",");for(var x=0;x<m.length;x++){var K=tf_Id(this.fltIds[t]+"_"+m[x]);if(K){K.checked=true}}}}},__setCheckListValues:function(e){if(e==null){return}var x=e.value;var p=parseInt(e.id.split("_")[2]);var w="ul",l="li";var g=e;while(g.nodeName.tf_LCase()!=w){g=g.parentNode}if(g.nodeName.tf_LCase()!=w){return}var r=g.childNodes[p];var q=g.getAttribute("colIndex");var m=g.getAttribute("value");var b=g.getAttribute("indexes");if(e.checked){if(x==""){if((b!=null&&b!="")){var c=b.split(this.separator);for(var v=0;v<c.length;v++){var t=tf_Id(this.fltIds[q]+"_"+c[v]);if(t){t.checked=false;tf_RemoveClass(g.childNodes[c[v]],this.checkListSlcItemCssClass)}}}g.setAttribute("value","");g.setAttribute("indexes","")}else{m=(m)?m:"";x=(m+" "+x+" "+this.orOperator).tf_Trim();p=b+p+this.separator;g.setAttribute("value",x);g.setAttribute("indexes",p);if(tf_Id(this.fltIds[q]+"_0")){tf_Id(this.fltIds[q]+"_0").checked=false}}if(r.nodeName.tf_LCase()==l){tf_RemoveClass(g.childNodes[0],this.checkListSlcItemCssClass);tf_AddClass(r,this.checkListSlcItemCssClass)}}else{if(x!=""){var d=new RegExp(tf_RegexpEscape(x+" "+this.orOperator));m=m.replace(d,"");g.setAttribute("value",m.tf_Trim());var s=new RegExp(tf_RegexpEscape(p+this.separator));b=b.replace(s,"");g.setAttribute("indexes",b)}if(r.nodeName.tf_LCase()==l){tf_RemoveClass(r,this.checkListSlcItemCssClass)}}},SetResetBtn:function(){if(!this.hasGrid&&!this.isFirstLoad){return}if(this.btnResetEl!=null){return}var d=this.fObj;this.btnResetTgtId=d.btn_reset_target_id!=undefined?d.btn_reset_target_id:null;this.btnResetEl=null;this.btnResetText=d.btn_reset_text!=undefined?d.btn_reset_text:"Reset";this.btnResetTooltip=d.btn_reset_tooltip!=undefined?d.btn_reset_tooltip:"Clear filters";this.btnResetHtml=d.btn_reset_html!=undefined?d.btn_reset_html:(!this.enableIcons?null:'<input type="button" value="" class="'+this.btnResetCssClass+'" title="'+this.btnResetTooltip+'" />');var c=tf_CreateElm("span",["id",this.prfxResetSpan+this.id]);if(this.btnResetTgtId==null){this.SetTopDiv()}var e=(this.btnResetTgtId==null)?this.rDiv:tf_Id(this.btnResetTgtId);e.appendChild(c);if(this.btnResetHtml==null){var b=tf_CreateElm("a",["href","javascript:void(0);"]);b.className=this.btnResetCssClass;b.appendChild(tf_CreateText(this.btnResetText));c.appendChild(b);b.onclick=this.Evt._Clear}else{c.innerHTML=this.btnResetHtml;var g=c.firstChild;g.onclick=this.Evt._Clear}this.btnResetEl=tf_Id(this.prfxResetSpan+this.id).firstChild},RemoveResetBtn:function(){if(!this.hasGrid){return}if(this.btnResetEl==null){return}var b=tf_Id(this.prfxResetSpan+this.id);if(b!=null){b.parentNode.removeChild(b)}this.btnResetEl=null},SetStatusBar:function(){if(!this.hasGrid&&!this.isFirstLoad){return}var d=this.fObj;this.statusBarTgtId=d.status_bar_target_id!=undefined?d.status_bar_target_id:null;this.statusBarDiv=null;this.statusBarSpan=null;this.statusBarSpanText=null;this.statusBarText=d.status_bar_text!=undefined?d.status_bar_text:"";this.statusBarCssClass=d.status_bar_css_class!=undefined?d.status_bar_css_class:"status";this.statusBarCloseDelay=250;var c=tf_CreateElm("div",["id",this.prfxStatus+this.id]);c.className=this.statusBarCssClass;var b=tf_CreateElm("span",["id",this.prfxStatusSpan+this.id]);var g=tf_CreateElm("span",["id",this.prfxStatusTxt+this.id]);g.appendChild(tf_CreateText(this.statusBarText));if(this.statusBarTgtId==null){this.SetTopDiv()}var e=(this.statusBarTgtId==null)?this.lDiv:tf_Id(this.statusBarTgtId);if(this.statusBarDiv&&tf_isIE){this.statusBarDiv.outerHTML=""}if(this.statusBarTgtId==null){c.appendChild(g);c.appendChild(b);e.appendChild(c)}else{e.appendChild(g);e.appendChild(b)}this.statusBarDiv=tf_Id(this.prfxStatus+this.id);this.statusBarSpan=tf_Id(this.prfxStatusSpan+this.id);this.statusBarSpanText=tf_Id(this.prfxStatusTxt+this.id)},RemoveStatusBar:function(){if(!this.hasGrid){return}if(this.statusBarDiv){this.statusBarDiv.innerHTML="";this.statusBarDiv.parentNode.removeChild(this.statusBarDiv);this.statusBarSpan=null;this.statusBarSpanText=null;this.statusBarDiv=null}},StatusMsg:function(b){if(b==undefined){this.StatusMsg("")}if(this.status){this.WinStatusMsg(b)}if(this.statusBar){this.StatusBarMsg(b)}},WinStatusMsg:function(b){if(!this.status){return}window.status=b},StatusBarMsg:function(b){if(!this.statusBar||!this.statusBarSpan){return}var g=this;function c(){g.statusBarSpan.innerHTML=b}var e=(b=="")?(this.statusBarCloseDelay):1;window.setTimeout(c,e)},SetRowsCounter:function(){if(!this.hasGrid&&!this.isFirstLoad){return}if(this.rowsCounterSpan!=null){return}var d=this.fObj;this.rowsCounterTgtId=d.rows_counter_target_id!=undefined?d.rows_counter_target_id:null;this.rowsCounterDiv=null;this.rowsCounterSpan=null;this.rowsCounterText=d.rows_counter_text!=undefined?d.rows_counter_text:"Rows: ";this.fromToTextSeparator=d.from_to_text_separator!=undefined?d.from_to_text_separator:"-";this.overText=d.over_text!=undefined?d.over_text:" / ";this.totRowsCssClass=d.tot_rows_css_class!=undefined?d.tot_rows_css_class:"tot";var c=tf_CreateElm("div",["id",this.prfxCounter+this.id]);c.className=this.totRowsCssClass;var e=tf_CreateElm("span",["id",this.prfxTotRows+this.id]);var b=tf_CreateElm("span",["id",this.prfxTotRowsTxt+this.id]);b.appendChild(tf_CreateText(this.rowsCounterText));if(this.rowsCounterTgtId==null){this.SetTopDiv()}var g=(this.rowsCounterTgtId==null)?this.lDiv:tf_Id(this.rowsCounterTgtId);if(this.rowsCounterDiv&&tf_isIE){this.rowsCounterDiv.outerHTML=""}if(this.rowsCounterTgtId==null){c.appendChild(b);c.appendChild(e);g.appendChild(c)}else{g.appendChild(b);g.appendChild(e)}this.rowsCounterDiv=tf_Id(this.prfxCounter+this.id);this.rowsCounterSpan=tf_Id(this.prfxTotRows+this.id);this.RefreshNbRows()},RemoveRowsCounter:function(){if(!this.hasGrid){return}if(this.rowsCounterSpan==null){return}if(this.rowsCounterTgtId==null&&this.rowsCounterDiv){if(tf_isIE){this.rowsCounterDiv.outerHTML=""}else{this.rowsCounterDiv.parentNode.removeChild(this.rowsCounterDiv)}}else{tf_Id(this.rowsCounterTgtId).innerHTML=""}this.rowsCounterSpan=null;this.rowsCounterDiv=null},RefreshNbRows:function(e){if(this.rowsCounterSpan==null){return}var c;if(!this.paging){if(e!=undefined&&e!=""){c=e}else{c=(this.nbFilterableRows-this.nbHiddenRows-(this.hasVisibleRows?this.visibleRows.length:0))}}else{var d=parseInt(this.startPagingRow)+((this.nbVisibleRows>0)?1:0);var b=(d+this.pagingLength)-1<=this.nbVisibleRows?(d+this.pagingLength)-1:this.nbVisibleRows;c=d+this.fromToTextSeparator+b+this.overText+this.nbVisibleRows}this.rowsCounterSpan.innerHTML=c},SetWatermark:function(d){if(!this.fltGrid){return}if(this.inpWatermark!=""){var d=(d||d==undefined)?true:false;for(var c=0;c<this.fltIds.length;c++){if(this["col"+c]!=this.fltTypeInp){continue}var b=(!this.isInpWatermarkArray?this.inpWatermark:this.inpWatermark[c]);if(this.GetFilterValue(c)==(d?"":b)){this.SetFilterValue(c,(!d?"":b));tf_AddClass(this.GetFilterElement(c),this.inpWatermarkCssClass)}}}},SetGridLayout:function(){if(!this.gridLayout){return}var J=this.fObj;this.gridWidth=J.grid_width!=undefined?J.grid_width:null;this.gridHeight=J.grid_height!=undefined?J.grid_height:null;this.gridMainContCssClass=J.grid_cont_css_class!=undefined?J.grid_cont_css_class:"grd_Cont";this.gridContCssClass=J.grid_tbl_cont_css_class!=undefined?J.grid_tbl_cont_css_class:"grd_tblCont";this.gridHeadContCssClass=J.grid_tblHead_cont_css_class!=undefined?J.grid_tblHead_cont_css_class:"grd_headTblCont";this.gridInfDivCssClass=J.grid_inf_grid_css_class!=undefined?J.grid_inf_grid_css_class:"grd_inf";this.gridHeadRowIndex=J.grid_headers_row_index!=undefined?J.grid_headers_row_index:0;this.gridHeadRows=J.grid_headers_rows!=undefined?J.grid_headers_rows:[0];this.gridEnableFilters=J.grid_enable_default_filters!=undefined?J.grid_enable_default_filters:true;this.gridDefaultColWidth=J.grid_default_col_width!=undefined?J.grid_default_col_width:"100px";this.gridEnableColResizer=J.grid_enable_cols_resizer!=undefined?J.grid_enable_cols_resizer:true;this.gridColResizerPath=J.grid_cont_col_resizer_path!=undefined?J.grid_cont_col_resizer_path:this.basePath+"TFExt_ColsResizer/TFExt_ColsResizer.js";if(!this.hasColWidth){this.colWidth=[];for(var E=0;E<this.nbCells;E++){var g,l=this.tbl.rows[this.gridHeadRowIndex].cells[E];if(l.width!=""){g=l.width}else{if(l.style.width!=""){g=parseInt(l.style.width)}else{g=this.gridDefaultColWidth}}this.colWidth[E]=g}this.hasColWidth=true}this.SetColWidths(this.gridHeadRowIndex);var q;if(this.tbl.width!=""){q=this.tbl.width}else{if(this.tbl.style.width!=""){q=parseInt(this.tbl.style.width)}else{q=this.tbl.clientWidth}}this.tblMainCont=tf_CreateElm("div",["id",this.prfxMainTblCont+this.id]);this.tblMainCont.className=this.gridMainContCssClass;if(this.gridWidth){this.tblMainCont.style.width=this.gridWidth}this.tbl.parentNode.insertBefore(this.tblMainCont,this.tbl);this.tblCont=tf_CreateElm("div",["id",this.prfxTblCont+this.id]);this.tblCont.className=this.gridContCssClass;if(this.gridWidth){this.tblCont.style.width=this.gridWidth}if(this.gridHeight){this.tblCont.style.height=this.gridHeight}this.tbl.parentNode.insertBefore(this.tblCont,this.tbl);var w=this.tbl.parentNode.removeChild(this.tbl);this.tblCont.appendChild(w);if(this.tbl.style.width==""){this.tbl.style.width=(this.__containsStr("%",q)?this.tbl.clientWidth:q)+"px"}var K=this.tblCont.parentNode.removeChild(this.tblCont);this.tblMainCont.appendChild(K);this.headTblCont=tf_CreateElm("div",["id",this.prfxHeadTblCont+this.id]);this.headTblCont.className=this.gridHeadContCssClass;if(this.gridWidth){this.headTblCont.style.width=this.gridWidth}this.headTbl=tf_CreateElm("table",["id",this.prfxHeadTbl+this.id]);var M=tf_CreateElm("tHead");var m=this.tbl.rows[this.gridHeadRowIndex];var v=[];for(var B=0;B<this.nbCells;B++){var l=m.cells[B];var x=l.getAttribute("id");if(!x||x==""){x=this.prfxGridTh+B+"_"+this.id;l.setAttribute("id",x)}v.push(x)}var z=tf_CreateElm("tr");if(this.gridEnableFilters&&this.fltGrid){this.externalFltTgtIds=[];for(var F=0;F<this.nbCells;F++){var H=this.prfxFlt+F+this.prfxGridFltTd+this.id;var L=tf_CreateElm(this.fltCellTag,["id",H]);z.appendChild(L);this.externalFltTgtIds[F]=H}}for(var G=0;G<this.gridHeadRows.length;G++){var u=this.tbl.rows[this.gridHeadRows[0]];M.appendChild(u)}this.headTbl.appendChild(M);if(this.filtersRowIndex==0){M.insertBefore(z,m)}else{M.appendChild(z)}this.headTblCont.appendChild(this.headTbl);this.tblCont.parentNode.insertBefore(this.headTblCont,this.tblCont);var I=tf_Tag(this.tbl,"thead");if(I.length>0){this.tbl.removeChild(I[0])}this.headTbl.style.width=this.tbl.style.width;this.headTbl.style.tableLayout="fixed";this.tbl.style.tableLayout="fixed";this.headTbl.cellPadding=this.tbl.cellPadding;this.headTbl.cellSpacing=this.tbl.cellSpacing;this.headTblCont.style.width=this.tblCont.clientWidth+"px";this.SetColWidths();this.tbl.style.width="";if(tf_isIE||tf_isIE7){this.headTbl.style.width=""}var A=this;this.tblCont.onscroll=function(){A.headTblCont.scrollLeft=this.scrollLeft;var d=this;if(!A.isPointerXOverwritten){try{TF.Evt.pointerX=function(n){n=n||window.event;var o=tf_StandardBody().scrollLeft+d.scrollLeft;return(n.pageX+d.scrollLeft)||(n.clientX+o)};A.isPointerXOverwritten=true}catch(c){A.isPointerXOverwritten=false}}};var J=this.fObj==undefined?{}:this.fObj;if(J.sort!=false){this.sort=true;this.sortConfig.asyncSort=true;this.sortConfig.triggerIds=v}if(this.gridEnableColResizer){if(!this.hasExtensions){this.extensions={name:["ColumnsResizer_"+this.id],src:[this.gridColResizerPath],description:["Columns Resizing"],initialize:[function(c){c.SetColsResizer("ColumnsResizer_"+c.id)}]};this.hasExtensions=true}else{if(!this.__containsStr("colsresizer",this.extensions.src.toString().tf_LCase())){this.extensions.name.push("ColumnsResizer_"+this.id);this.extensions.src.push(this.gridColResizerPath);this.extensions.description.push("Columns Resizing");this.extensions.initialize.push(function(c){c.SetColsResizer("ColumnsResizer_"+c.id)})}}}J.col_resizer_cols_headers_table=this.headTbl.getAttribute("id");J.col_resizer_cols_headers_index=this.gridHeadRowIndex;J.col_resizer_width_adjustment=0;J.col_enable_text_ellipsis=false;A.tblHasColTag=(tf_Tag(A.tbl,"col").length>0)?true:false;if(!tf_isIE&&!tf_isIE7){function D(n){if(!n){return}for(var c=(n.nbCells-1);c>=0;c--){var d=tf_CreateElm("col",["id",n.id+"_col_"+c]);n.tbl.firstChild.parentNode.insertBefore(d,n.tbl.firstChild);d.style.width=n.colWidth[c];n.gridColElms[c]=d}n.tblHasColTag=true}if(!A.tblHasColTag){D(A)}else{var s=tf_Tag(A.tbl,"col");for(var G=0;G<A.nbCells;G++){s[G].setAttribute("id",A.id+"_col_"+G);s[G].style.width=A.colWidth[G];A.gridColElms.push(s[G])}}}if(tf_isIE||tf_isIE7){var e=tf_Tag(A.tbl,"tbody"),y;if(e.length>0){y=e[0].insertRow(0)}else{y=A.tbl.insertRow(0)}y.style.height="0px";for(var G=0;G<A.nbCells;G++){var p=tf_CreateElm("td",["id",A.id+"_col_"+G]);p.style.width=A.colWidth[G];A.tbl.rows[1].cells[G].style.width="";y.appendChild(p);A.gridColElms.push(p)}this.hasGridWidthsRow=true;A.leadColWidthsRow=A.tbl.rows[0];A.leadColWidthsRow.setAttribute("validRow","false");var b=tf_IsFn(J.on_before_sort)?J.on_before_sort:null;J.on_before_sort=function(d,c){d.leadColWidthsRow.setAttribute("validRow","false");if(b!=null){b.call(null,d,c)}};var N=tf_IsFn(J.on_after_sort)?J.on_after_sort:null;J.on_after_sort=function(n,c){if(n.leadColWidthsRow.rowIndex!=0){var d=n.leadColWidthsRow;if(e.length>0){e[0].moveRow(n.leadColWidthsRow.rowIndex,0)}else{n.tbl.moveRow(n.leadColWidthsRow.rowIndex,0)}}if(N!=null){N.call(null,n,c)}}}var C=tf_IsFn(J.on_after_col_resized)?J.on_after_col_resized:null;J.on_after_col_resized=function(O,r){if(r==undefined){return}var c=O.crWColsRow.cells[r].style.width;var n=O.gridColElms[r];n.style.width=c;var t=O.crWColsRow.cells[r].clientWidth;var d=O.crWRowDataTbl.cells[r].clientWidth;if(tf_isIE||tf_isIE7){O.tbl.style.width=O.headTbl.clientWidth+"px"}if(t!=d&&!tf_isIE&&!tf_isIE7){O.headTbl.style.width=O.tbl.clientWidth+"px"}if(C!=null){C.call(null,O,r)}};if(this.tbl.clientWidth!=this.headTbl.clientWidth){this.tbl.style.width=this.headTbl.clientWidth+"px"}},RemoveGridLayout:function(){if(!this.gridLayout){return}var b=this.tbl.parentNode.removeChild(this.tbl);this.tblMainCont.parentNode.insertBefore(b,this.tblMainCont);this.tblMainCont.parentNode.removeChild(this.tblMainCont);this.tblMainCont=null;this.headTblCont=null;this.headTbl=null;this.tblCont=null;this.tbl.outerHTML=this.sourceTblHtml;this.tbl=tf_Id(this.id)},SetPopupFilterIcons:function(){if(!this.popUpFilters){return}this.isExternalFlt=true;var c=this.fObj;this.popUpImgFlt=c.popup_filters_image!=undefined?c.popup_filters_image:this.themesPath+"icn_filter.gif";this.popUpImgFltActive=c.popup_filters_image_active!=undefined?c.popup_filters_image_active:this.themesPath+"icn_filterActive.gif";this.popUpImgFltHtml=c.popup_filters_image_html!=undefined?c.popup_filters_image_html:'<img src="'+this.popUpImgFlt+'" alt="Column filter" />';this.popUpDivCssClass=c.popup_div_css_class!=undefined?c.popup_div_css_class:"popUpFilter";this.onBeforePopUpOpen=tf_IsFn(c.on_before_popup_filter_open)?c.on_before_popup_filter_open:null;this.onAfterPopUpOpen=tf_IsFn(c.on_after_popup_filter_open)?c.on_after_popup_filter_open:null;this.onBeforePopUpClose=tf_IsFn(c.on_before_popup_filter_close)?c.on_before_popup_filter_close:null;this.onAfterPopUpClose=tf_IsFn(c.on_after_popup_filter_close)?c.on_after_popup_filter_close:null;this.externalFltTgtIds=[];this.popUpFltSpans=[];this.popUpFltImgs=[];this.popUpFltElms=!this.popUpFltElmCache?[]:this.popUpFltElmCache;this.popUpFltAdjustToContainer=true;var e=this;for(var b=0;b<this.nbCells;b++){if(this["col"+b]==this.fltTypeNone){continue}var d=tf_CreateElm("span",["id",this.prfxPopUpSpan+this.id+"_"+b],["ci",b]);d.innerHTML=this.popUpImgFltHtml;var g=this.GetHeaderElement(b);g.appendChild(d);d.onclick=function(q){var m=q||window.event;var o=parseInt(this.getAttribute("ci"));e.CloseAllPopupFilters(o);e.TogglePopupFilter(o);if(e.popUpFltAdjustToContainer){var l=e.popUpFltElms[o];var r=e.GetHeaderElement(o);var n=r.clientWidth*0.95;if(!tf_isNotIE){var p=tf_ObjPosition(r,[r.nodeName])[0];l.style.left=(p)+"px"}l.style.width=parseInt(n)+"px"}tf_CancelEvent(m);tf_StopEvent(m)};this.popUpFltSpans[b]=d;this.popUpFltImgs[b]=d.firstChild}},SetPopupFilters:function(){for(var b=0;b<this.popUpFltElmCache.length;b++){this.SetPopupFilter(b,this.popUpFltElmCache[b])}},SetPopupFilter:function(c,e){var b=!e?tf_CreateElm("div",["id",this.prfxPopUpDiv+this.id+"_"+c]):e;b.className=this.popUpDivCssClass;this.externalFltTgtIds.push(this.prfxPopUpDiv+this.id+"_"+c);var d=this.GetHeaderElement(c);d.insertBefore(b,d.firstChild);b.onclick=function(g){tf_StopEvent(g||window.event)};this.popUpFltElms[c]=b},TogglePopupFilter:function(b){var c=this.popUpFltElms[b];if(c.style.display=="none"||c.style.display==""){if(this.onBeforePopUpOpen!=null){this.onBeforePopUpOpen.call(null,this,this.popUpFltElms[b],b)}c.style.display="block";if(this["col"+b]==this.fltTypeInp){this.GetFilterElement(b).focus()}if(this.onAfterPopUpOpen!=null){this.onAfterPopUpOpen.call(null,this,this.popUpFltElms[b],b)}}else{if(this.onBeforePopUpClose!=null){this.onBeforePopUpClose.call(null,this,this.popUpFltElms[b],b)}c.style.display="none";if(this.onAfterPopUpClose!=null){this.onAfterPopUpClose.call(null,this,this.popUpFltElms[b],b)}}},CloseAllPopupFilters:function(b){for(var c=0;c<this.popUpFltElms.length;c++){if(c==b){continue}var d=this.popUpFltElms[c];if(d){d.style.display="none"}}},RemovePopupFilters:function(){this.popUpFltElmCache=[];for(var b=0;b<this.popUpFltElms.length;b++){var d=this.popUpFltElms[b];var c=this.popUpFltSpans[b];if(d){d.parentNode.removeChild(d);this.popUpFltElmCache[b]=d}d=null;if(c){c.parentNode.removeChild(c)}c=null}},SetPopupFilterIcon:function(b,d){var c=d==undefined?true:d;if(this.popUpFltImgs[b]){this.popUpFltImgs[b].src=(d)?this.popUpImgFltActive:this.popUpImgFlt}},SetAllPopupFiltersIcon:function(d){var c=d==undefined?false:d;for(var b=0;b<this.popUpFltImgs.length;b++){this.SetPopupFilterIcon(b,false)}},RememberFiltersValue:function(b){var d=[];for(var c=0;c<this.fltIds.length;c++){value=this.GetFilterValue(c);if(value==""){value=" "}d.push(value)}d.push(this.fltIds.length);tf_WriteCookie(b,d.join(this.separator),this.cookieDuration)},RememberPageNb:function(b){tf_WriteCookie(b,this.currentPageNb,this.cookieDuration)},RememberPageLength:function(b){tf_WriteCookie(b,this.resultsPerPageSlc.selectedIndex,this.cookieDuration)},ResetValues:function(){this.EvtManager(this.Evt.name.resetvalues)},_ResetValues:function(){if(this.rememberGridValues&&this.fillSlcOnDemand){this.ResetGridValues(this.fltsValuesCookie)}if(this.rememberPageLen){this.ResetPageLength(this.pgLenCookie)}if(this.rememberPageNb){this.ResetPage(this.pgNbCookie)}},ResetGridValues:function(b){if(!this.fillSlcOnDemand){return}var n=tf_ReadCookie(b);var e=new RegExp(this.separator,"g");var q=n.split(e);var p=this.GetFiltersByType(this.fltTypeSlc,true);var g=this.GetFiltersByType(this.fltTypeMulti,true);if(q[(q.length-1)]==this.fltIds.length){for(var l=0;l<(q.length-1);l++){if(q[l]==" "){continue}if(this["col"+l]==this.fltTypeSlc||this["col"+l]==this.fltTypeMulti){var d=tf_Id(this.fltIds[l]);d.options[0].selected=false;if(p.tf_Has(l)){var c=tf_CreateOpt(q[l],q[l],true);d.appendChild(c);this.hasStoredValues=true}if(g.tf_Has(l)){var u=q[l].split(" "+this.orOperator+" ");for(j=0;j<u.length;j++){if(u[j]==""){continue}var c=tf_CreateOpt(u[j],u[j],true);d.appendChild(c);this.hasStoredValues=true;if(tf_isIE){this.__deferMultipleSelection(d,j,false);hasStoredValues=false}}}}else{if(this["col"+l]==this.fltTypeCheckList){var m=this.checkListDiv[l];m.title=m.innerHTML;m.innerHTML="";var o=tf_CreateElm("ul",["id",this.fltIds[l]],["colIndex",l]);o.className=this.checkListCssClass;var t=tf_CreateCheckItem(this.fltIds[l]+"_0","",this.displayAllText);t.className=this.checkListItemCssClass;o.appendChild(t);m.appendChild(o);var u=q[l].split(" "+this.orOperator+" ");for(j=0;j<u.length;j++){if(u[j]==""){continue}var r=tf_CreateCheckItem(this.fltIds[l]+"_"+(j+1),u[j],u[j]);r.className=this.checkListItemCssClass;o.appendChild(r);r.check.checked=true;this.__setCheckListValues(r.check);this.hasStoredValues=true}}}}if(!this.hasStoredValues&&this.paging){this.SetPagingInfo()}}},SetRowBg:function(e,b){if(!this.alternateBgs||isNaN(e)){return}var d=this.tbl.rows;var c=(b==undefined)?e:b;this.RemoveRowBg(e);tf_AddClass(d[e],(c%2)?this.rowBgEvenCssClass:this.rowBgOddCssClass)},RemoveRowBg:function(b){if(isNaN(b)){return}var c=this.tbl.rows;tf_RemoveClass(c[b],this.rowBgOddCssClass);tf_RemoveClass(c[b],this.rowBgEvenCssClass)},SetAlternateRows:function(){if(!this.hasGrid&&!this.isFirstLoad){return}var l=this.tbl.rows;var e=this.validRowsIndex==null;var d=(e)?this.refRow:0;var m=(e)?(this.nbFilterableRows+d):this.validRowsIndex.length;var b=0;for(var c=d;c<m;c++){var g=(e)?c:this.validRowsIndex[c];this.SetRowBg(g,b);b++}},RemoveAlternateRows:function(){if(!this.hasGrid){return}var c=this.tbl.rows;for(var b=this.refRow;b<this.nbRows;b++){this.RemoveRowBg(b)}this.isStartBgAlternate=true},SetFixedHeaders:function(){if((!this.hasGrid&&!this.isFirstLoad)||!this.fixedHeaders){return}if(this.contDiv){return}var m=tf_Tag(this.tbl,"thead");if(m.length==0){return}var l=tf_Tag(this.tbl,"tbody");if(l[0].clientHeight!=0){this.prevTBodyH=l[0].clientHeight;this.prevTBodyOverflow=l[0].style.overflow;this.prevTBodyOverflowX=l[0].style.overflowX;l[0].style.height=this.tBodyH+"px";l[0].style.overflow="auto";l[0].style.overflowX="hidden"}else{var b=tf_CreateElm("div",["id",this.prfxContentDiv+this.id]);b.className=this.contDivCssClass;this.tbl.parentNode.insertBefore(b,this.tbl);b.appendChild(this.tbl);this.contDiv=tf_Id(this.prfxContentDiv+this.id);this.contDiv.style.position="relative";var d=0;var c=tf_Tag(m[0],"tr");for(var g=0;g<c.length;g++){c[g].style.cssText+="position:relative; top:expression(offsetParent.scrollTop);";d+=parseInt(c[g].clientHeight)}this.contDiv.style.height=(this.tBodyH+d)+"px";var o=tf_Tag(this.tbl,"tfoot");if(o.length==0){return}var n=tf_Tag(o[0],"tr");for(var e=0;e<n.length;e++){n[e].style.cssText+="position:relative; overflow-x: hidden; top: expression(parentNode.parentNode.offsetHeight >= offsetParent.offsetHeight ? 0 - parentNode.parentNode.offsetHeight + offsetParent.offsetHeight + offsetParent.scrollTop : 0);"}}},RemoveFixedHeaders:function(){if(!this.hasGrid||!this.fixedHeaders){return}if(this.contDiv){this.contDiv.parentNode.insertBefore(this.tbl,this.contDiv);this.contDiv.parentNode.removeChild(this.contDiv);this.contDiv=null;var m=tf_Tag(this.tbl,"thead");if(m.length==0){return}var l=tf_Tag(m[0],"tr");if(l.length==0){return}for(var d=0;d<l.length;d++){l[d].style.cssText=""}var g=tf_Tag(this.tbl,"tfoot");if(g.length==0){return}var e=tf_Tag(g[0],"tr");for(var c=0;c<e.length;c++){e[c].style.position="relative";e[c].style.top="";e[c].style.overeflowX=""}}else{var b=tf_Tag(this.tbl,"tbody");if(b.length==0){return}b[0].style.height=this.prevTBodyH+"px";b[0].style.overflow=this.prevTBodyOverflow;b[0].style.overflowX=this.prevTBodyOverflowX}},Filter:function(){this.EvtManager(this.Evt.name.filter)},_Filter:function(){if(!this.fltGrid||(!this.hasGrid&&!this.isFirstLoad)){return}if(this.onBeforeFilter){this.onBeforeFilter.call(null,this)}if(this.inpWatermark!=""){this.SetWatermark(false)}var t=this.tbl.rows;f=this.fObj!=undefined?this.fObj:[];var r=0;this.validRowsIndex=[];var M=this;if(this.highlightKeywords){this.UnhighlightAll()}if(this.popUpFilters){this.SetAllPopupFiltersIcon()}if(this.markActiveColumns){this.ClearActiveColumns()}this.searchArgs=this.GetFiltersValue();var z,Q;var T=new RegExp(this.leOperator),D=new RegExp(this.geOperator);var U=new RegExp(this.lwOperator),b=new RegExp(this.grOperator);var d=new RegExp(this.dfOperator),R=new RegExp(tf_RegexpEscape(this.lkOperator));var l=new RegExp(this.eqOperator),A=new RegExp(this.stOperator);var m=new RegExp(this.enOperator),y=new RegExp(this.anOperator);var H=new RegExp(this.curExp),n=this.emOperator;var q=this.nmOperator;function S(W,V,o){if(M.highlightKeywords&&V){W=W.replace(R,"");W=W.replace(l,"");W=W.replace(A,"");W=W.replace(m,"");var s=W;if(T.test(W)||D.test(W)||U.test(W)||b.test(W)||d.test(W)){s=tf_GetNodeText(o)}if(s!=""){tf_HighlightWord(o,s,M.highlightCssClass,M)}}}function B(aj,aa,ah){var ac;var Z=U.test(aj),ad=T.test(aj);var ae=b.test(aj),ao=D.test(aj);var al=d.test(aj),aq=l.test(aj);var ab=R.test(aj),af=y.test(aj);var ag=A.test(aj),o=m.test(aj);var s=(n==aj),V=(q==aj);var am=(Z&&tf_IsValidDate(aj.replace(U,""),F));var Y=(ad&&tf_IsValidDate(aj.replace(T,""),F));var ak=(ae&&tf_IsValidDate(aj.replace(b,""),F));var ai=(ao&&tf_IsValidDate(aj.replace(D,""),F));var ap=(al&&tf_IsValidDate(aj.replace(d,""),F));var an=(aq&&tf_IsValidDate(aj.replace(l,""),F));if(tf_IsValidDate(aa,F)){var X=tf_FormatDate(aa,F);if(am){var W=tf_FormatDate(aj.replace(U,""),F);ac=(X<W)}else{if(Y){var W=tf_FormatDate(aj.replace(T,""),F);ac=(X<=W)}else{if(ai){var W=tf_FormatDate(aj.replace(D,""),F);ac=(X>=W)}else{if(ak){var W=tf_FormatDate(aj.replace(b,""),F);ac=(X>W)}else{if(ap){var W=tf_FormatDate(aj.replace(d,""),F);ac=(X.toString()!=W.toString())}else{if(an){var W=tf_FormatDate(aj.replace(l,""),F);ac=(X.toString()==W.toString())}else{if(R.test(aj)){ac=M.__containsStr(aj.replace(R,""),aa,null,false)}else{if(tf_IsValidDate(aj,F)){var W=tf_FormatDate(aj,F);ac=(X.toString()==W.toString())}else{if(s){ac=(aa.tf_Trim()==""?true:false)}else{if(V){ac=(aa.tf_Trim()!=""?true:false)}}}}}}}}}}}else{if(M.hasColNbFormat&&M.colNbFormat[ah]!=null){z=tf_RemoveNbFormat(aa,M.colNbFormat[ah]);Q=M.colNbFormat[ah]}else{if(M.thousandsSeparator==","&&M.decimalSeparator=="."){z=tf_RemoveNbFormat(aa,"us");Q="us"}else{z=tf_RemoveNbFormat(aa,"eu");Q="eu"}}if(ad){ac=z<=tf_RemoveNbFormat(aj.replace(T,""),Q)}else{if(ao){ac=z>=tf_RemoveNbFormat(aj.replace(D,""),Q)}else{if(Z){ac=z<tf_RemoveNbFormat(aj.replace(U,""),Q)}else{if(ae){ac=z>tf_RemoveNbFormat(aj.replace(b,""),Q)}else{if(al){ac=M.__containsStr(aj.replace(d,""),aa)?false:true}else{if(ab){ac=M.__containsStr(aj.replace(R,""),aa,null,false)}else{if(aq){ac=M.__containsStr(aj.replace(l,""),aa,null,true)}else{if(ag){ac=aa.indexOf(aj.replace(A,""))==0?true:false}else{if(o){var w=aj.replace(m,"");ac=aa.lastIndexOf(w,aa.length-1)==(aa.length-1)-(w.length-1)&&aa.lastIndexOf(w,aa.length-1)>-1?true:false}else{if(s){ac=(aa.tf_Trim()==""?true:false)}else{if(V){ac=(aa.tf_Trim()!=""?true:false)}else{ac=M.__containsStr(aj,aa,(f["col_"+ah]==undefined)?this.fltTypeInp:f["col_"+ah])}}}}}}}}}}}}return ac}for(var O=this.refRow;O<this.nbRows;O++){if(t[O].style.display=="none"){t[O].style.display=""}var C=t[O].cells;var E=C.length;if(E!=this.nbCells){continue}var N=[];var u=(this.searchType=="include")?true:false;var e=false;for(var P=0;P<E;P++){var J=this.searchArgs[(this.singleSearchFlt)?0:P];var F=(this.hasColDateType)?this.colDateType[P]:this.defaultDateType;if(J==""){continue}var c=this.GetCellData(P,C[P]).tf_MatchCase(this.matchCase);var v=J.split(this.orOperator);var g=(v.length>1)?true:false;var L=J.split(this.anOperator);var p=(L.length>1)?true:false;if(g||p){var K,x=false;var I=(g)?v:L;for(var G=0;G<I.length;G++){K=I[G].tf_Trim();x=B(K,c,P);S(K,x,C[P]);if(g&&x){break}if(p&&!x){break}}N[P]=x}else{N[P]=B(J.tf_Trim(),c,P);S(J,N[P],C[P])}if(!N[P]){u=(this.searchType=="include")?false:true}if(this.singleSearchFlt&&N[P]){e=true}if(this.popUpFilters){this.SetPopupFilterIcon(P,true)}if(this.markActiveColumns){if(O==this.refRow){if(this.onBeforeActiveColumn){this.onBeforeActiveColumn.call(null,this,P)}tf_AddClass(this.GetHeaderElement(P),this.activeColumnsCssClass);if(this.onAfterActiveColumn){this.onAfterActiveColumn.call(null,this,P)}}}}if(this.singleSearchFlt&&e){u=true}if(!u){this.SetRowValidation(O,false);if(this.hasVisibleRows&&this.visibleRows.tf_Has(O)&&!this.paging){this.validRowsIndex.push(O)}else{r++}}else{this.SetRowValidation(O,true);this.validRowsIndex.push(O);if(this.alternateBgs){this.SetRowBg(O,this.validRowsIndex.length)}if(this.onRowValidated){this.onRowValidated.call(null,this,O)}}}this.nbVisibleRows=this.validRowsIndex.length;this.nbHiddenRows=r;this.isStartBgAlternate=false;if(this.rememberGridValues){this.RememberFiltersValue(this.fltsValuesCookie)}if(!this.paging){this.ApplyGridProps()}if(this.paging){this.startPagingRow=0;this.currentPageNb=1;this.SetPagingInfo(this.validRowsIndex)}if(this.onAfterFilter){this.onAfterFilter.call(null,this)}},ApplyGridProps:function(){if(this.activeFlt&&this.activeFlt.nodeName.tf_LCase()==this.fltTypeSlc&&!this.popUpFilters){this.activeFlt.blur();if(this.activeFlt.parentNode){this.activeFlt.parentNode.focus()}}if(this.visibleRows){this.SetVisibleRows()}if(this.colOperation){this.SetColOperation()}if(this.refreshFilters){this.RefreshFiltersGrid()}var b=(!this.paging&&this.hasVisibleRows)?(this.nbVisibleRows-this.visibleRows.length):this.nbVisibleRows;if(this.rowsCounter){this.RefreshNbRows(b)}if(this.inpWatermark!=""){this.SetWatermark(true)}if(this.popUpFilters){this.CloseAllPopupFilters()}},GetColValues:function(b,n,d){if(!this.fltGrid){return}var r=this.tbl.rows;var p=[];for(var m=this.refRow;m<this.nbRows;m++){var c=false;if(d!=undefined&&tf_IsObj(d)){c=d.tf_Has(m)}var q=r[m].cells;var e=q.length;if(e==this.nbCells&&!c){for(var l=0;l<e;l++){if(l==b&&r[m].style.display==""){var o=this.GetCellData(l,q[l]).tf_LCase();var g=this.colNbFormat?this.colNbFormat[b]:null;(n)?p.push(tf_RemoveNbFormat(o,g)):p.push(o)}}}}return p},GetFilterValue:function(d){if(!this.fltGrid){return}var b;var e=this.GetFilterElement(d);if(e==null){return b=""}if(this["col"+d]!=this.fltTypeMulti&&this["col"+d]!=this.fltTypeCheckList){b=e.value}else{if(this["col"+d]==this.fltTypeMulti){b="";for(var c=0;c<e.options.length;c++){if(e.options[c].selected){b=b.concat(e.options[c].value+" "+this.orOperator+" ")}}b=b.substr(0,b.length-4)}else{if(this["col"+d]==this.fltTypeCheckList){if(e.getAttribute("value")!=null){b=e.getAttribute("value");b=b.substr(0,b.length-3)}else{b=""}}}}return b},GetFiltersValue:function(){if(!this.fltGrid){return}var b=[];for(var c=0;c<this.fltIds.length;c++){b.push(this.GetFilterValue(c).tf_MatchCase(this.matchCase).tf_Trim())}return b},GetFilterId:function(b){if(!this.fltGrid){return}return this.fltIds[i]},GetFiltersByType:function(l,e){if(!this.fltGrid){return}var c=[];for(var g=0;g<this.fltIds.length;g++){var b=this["col"+g];if(b==l.tf_LCase()){var d=(e)?g:this.fltIds[g];c.push(d)}}return c},GetFilterElement:function(b){if(!this.fltGrid){return null}return tf_Id(this.fltIds[b])},GetCellsNb:function(c){var b=(c==undefined)?this.tbl.rows[0]:this.tbl.rows[c];return b.cells.length},GetRowsNb:function(){var c=this.refRow==undefined?0:this.refRow;var b=this.tbl.rows.length;return parseInt(b-c)},GetCellData:function(c,b){if(c==undefined||b==null){return""}if(this.customCellData&&this.customCellDataCols.tf_Has(c)){return this.customCellData.call(null,this,b,c)}else{return tf_GetNodeText(b)}},GetTableData:function(){var l=this.tbl.rows;for(var c=this.refRow;c<this.nbRows;c++){var g,b;g=[c,[]];var e=l[c].cells;for(var d=0;d<e.length;d++){var m=this.GetCellData(d,e[d]);g[1].push(m)}this.tblData.push(g)}return this.tblData},GetFilteredData:function(p){if(!this.validRowsIndex){return[]}var t=this.tbl.rows;var d=[];if(p){var s=(this.gridLayout)?this.headTbl:this.tbl;var b=s.rows[this.headersRow];var e=[b.rowIndex,[]];for(var g=0;g<this.nbCells;g++){var m=this.GetCellData(g,b.cells[g]);e[1].push(m)}d.push(e)}var c=this.GetValidRowsIndex(true);for(var l=0;l<c.length;l++){var e,o;e=[this.validRowsIndex[l],[]];var q=t[this.validRowsIndex[l]].cells;for(var g=0;g<q.length;g++){var n=this.GetCellData(g,q[g]);e[1].push(n)}d.push(e)}return d},GetFilteredDataCol:function(b){if(b==undefined){return[]}var l=this.GetFilteredData();var n=[];for(var e=0;e<l.length;e++){var g=l[e];var m=g[1];var o=m[b];n.push(o)}return n},GetRowDisplay:function(b){if(!this.fltGrid&&!tf_IsObj(b)){return}return b.style.display},SetRowValidation:function(g,c){var d=this.tbl.rows[g];if(!d||(typeof c).tf_LCase()!="boolean"){return}if(this.hasVisibleRows&&this.visibleRows.tf_Has(g)&&!this.paging){c=true}var e=(c)?"":"none";var b=(c)?"true":"false";d.style.display=e;if(this.paging){d.setAttribute("validRow",b)}},ValidateAllRows:function(){if(!this.hasGrid){return}this.validRowsIndex=[];for(var b=this.refRow;b<this.nbFilterableRows;b++){this.SetRowValidation(b,true);this.validRowsIndex.push(b)}},SetFilterValue:function(p,m,q){if((!this.fltGrid&&!this.isFirstLoad)||this.GetFilterElement(p)==null){return}var d=this.GetFilterElement(p);var e=(q==undefined)?true:q;m=(m==undefined)?"":m;if(this["col"+p]!=this.fltTypeMulti&&this["col"+p]!=this.fltTypeCheckList){d.value=m;if(this["col"+p]==this.fltTypeInp&&this.inpWatermark!=""){tf_RemoveClass(d,this.inpWatermarkCssClass)}}else{if(this["col"+p]==this.fltTypeMulti){var w=m.split(" "+this.orOperator+" ");var o=0;for(var n=0;n<d.options.length;n++){if(w==""){d.options[n].selected=false}if(d.options[n].value==""){d.options[n].selected=false}if(d.options[n].value!=""&&w.tf_Has(d.options[n].value,true)){if(tf_isIE){var c=(o==(w.length-1)&&e)?true:false;this.__deferMultipleSelection(d,n,c);o++}else{d.options[n].selected=true}}}}else{if(this["col"+p]==this.fltTypeCheckList){m=m.tf_MatchCase(this.matchCase);var w=m.split(" "+this.orOperator+" ");var l=d.setAttribute("value","");var b=d.setAttribute("indexes","");for(var g=0;g<tf_Tag(d,"li").length;g++){var u=tf_Tag(d,"li")[g];var t=tf_Tag(u,"label")[0];var r=tf_Tag(u,"input")[0];var v=tf_GetNodeText(t).tf_MatchCase(this.matchCase);if(v!=""&&w.tf_Has(v,true)){r.checked=true;this.__setCheckListValues(r)}else{r.checked=false;this.__setCheckListValues(r)}}}}}},SetColWidths:function(e){if(!this.fltGrid||!this.hasColWidth){return}var d=this,c;if(e==undefined){c=this.tbl.rows[0].style.display!="none"?0:1}else{c=e}b(this.tbl.rows[c]);function b(l){if(!d&&(d.nbCells!=d.colWidth.length)){return}if(d.nbCells==l.cells.length){for(var g=0;g<d.nbCells;g++){l.cells[g].style.width=d.colWidth[g]}}}},SetVisibleRows:function(){if(this.hasGrid&&this.hasVisibleRows&&!this.paging){for(var b=0;b<this.visibleRows.length;b++){if(this.visibleRows[b]<=this.nbRows){this.SetRowValidation(this.visibleRows[b],true)}}}},ClearFilters:function(){this.EvtManager(this.Evt.name.clear)},_ClearFilters:function(){if(!this.fltGrid){return}for(var b=0;b<this.fltIds.length;b++){this.SetFilterValue(b,"")}if(this.refreshFilters){this.activeFilterId="";this.RefreshFiltersGrid()}if(this.rememberPageLen){tf_RemoveCookie(this.pgLenCookie)}if(this.rememberPageNb){tf_RemoveCookie(this.pgNbCookie)}},ClearActiveColumns:function(){for(var b=0;b<this.fltIds.length;b++){tf_RemoveClass(this.GetHeaderElement(b),this.activeColumnsCssClass)}},RefreshGrid:function(b){var c=!b?this.fObj:b;var d=this.sort;if(d){this.sort=false}this.nbRows=this.GetRowsNb();this.RemoveGrid();window["tf_"+this.id]=new TF(this.id,this.startRow,c);this.isFirstLoad=true;this.fltIds=[];this._AddGrid();if(d){this.st.setTBody(this.tbl.tBodies[0]);this.sort=true}},RefreshFiltersGrid:function(){var l=this.GetFiltersByType(this.fltTypeSlc,true);var g=this.GetFiltersByType(this.fltTypeMulti,true);var e=this.GetFiltersByType(this.fltTypeCheckList,true);var n=l.concat(g);n=n.concat(e);if(this.activeFilterId!=null){var c=this.activeFilterId.split("_")[0];c=c.split(this.prfxFlt)[1];var b;for(var d=0;d<n.length;d++){var m=tf_Id(this.fltIds[n[d]]);b=this.GetFilterValue(n[d]);if(c!=n[d]||(this.paging&&l.tf_Has(n[d])&&c==n[d])||(!this.paging&&(e.tf_Has(n[d])||g.tf_Has(n[d])))||b==this.displayAllText){if(e.tf_Has(n[d])){this.checkListDiv[n[d]].innerHTML=""}else{m.innerHTML=""}if(this.fillSlcOnDemand){var o=tf_CreateOpt(this.displayAllText,"");if(m){m.appendChild(o)}}if(e.tf_Has(n[d])){this._PopulateCheckList(n[d])}else{this._PopulateSelect(n[d],true)}this.SetFilterValue(n[d],b)}}}},SetColOperation:function(){if(!this.isFirstLoad&&!this.hasGrid){return}if(this.onBeforeOperation){this.onBeforeOperation.call(null,this)}var labelId=this.colOperation.id;var colIndex=this.colOperation.col;var operation=this.colOperation.operation;var outputType=this.colOperation.write_method;var totRowIndex=this.colOperation.tot_row_index;var excludeRow=this.colOperation.exclude_row;var decimalPrecision=this.colOperation.decimal_precision!=undefined?this.colOperation.decimal_precision:2;var ucolIndex=[];var ucolMax=0;ucolIndex[ucolMax]=colIndex[0];for(var i=1;i<colIndex.length;i++){saved=0;for(var j=0;j<=ucolMax;j++){if(ucolIndex[j]==colIndex[i]){saved=1}}if(saved==0){ucolMax++;ucolIndex[ucolMax]=colIndex[i]}}if((typeof labelId).tf_LCase()=="object"&&(typeof colIndex).tf_LCase()=="object"&&(typeof operation).tf_LCase()=="object"){var row=this.tbl.rows;var colvalues=[];for(var ucol=0;ucol<=ucolMax;ucol++){colvalues.push(this.GetColValues(ucolIndex[ucol],true,excludeRow));var result,nbvalues=0,temp;var meanValue=0,sumValue=0,minValue=null,maxValue=null,q1Value=null,medValue=null,q3Value=null;var meanFlag=0,sumFlag=0,minFlag=0,maxFlag=0,q1Flag=0,medFlag=0,q3Flag=0;var theList=[];var opsThisCol=[],decThisCol=[],labThisCol=[],oTypeThisCol=[];var mThisCol=-1;for(var i=0;i<colIndex.length;i++){if(colIndex[i]==ucolIndex[ucol]){mThisCol++;opsThisCol[mThisCol]=operation[i].tf_LCase();decThisCol[mThisCol]=decimalPrecision[i];labThisCol[mThisCol]=labelId[i];oTypeThisCol=(outputType!=undefined&&(typeof outputType).tf_LCase()=="object")?outputType[i]:null;switch(opsThisCol[mThisCol]){case"mean":meanFlag=1;break;case"sum":sumFlag=1;break;case"min":minFlag=1;break;case"max":maxFlag=1;break;case"median":medFlag=1;break;case"q1":q1Flag=1;break;case"q3":q3Flag=1;break}}}for(var j=0;j<colvalues[ucol].length;j++){if((q1Flag==1)||(q3Flag==1)||(medFlag==1)){if(j<colvalues[ucol].length-1){for(k=j+1;k<colvalues[ucol].length;k++){if(eval(colvalues[ucol][k])<eval(colvalues[ucol][j])){temp=colvalues[ucol][j];colvalues[ucol][j]=colvalues[ucol][k];colvalues[ucol][k]=temp}}}}var cvalue=parseFloat(colvalues[ucol][j]);theList[j]=parseFloat(cvalue);if(!isNaN(cvalue)){nbvalues++;if((sumFlag==1)||(meanFlag==1)){sumValue+=parseFloat(cvalue)}if(minFlag==1){if(minValue==null){minValue=parseFloat(cvalue)}else{minValue=parseFloat(cvalue)<minValue?parseFloat(cvalue):minValue}}if(maxFlag==1){if(maxValue==null){maxValue=parseFloat(cvalue)}else{maxValue=parseFloat(cvalue)>maxValue?parseFloat(cvalue):maxValue}}}}if(meanFlag==1){meanValue=sumValue/nbvalues}if(medFlag==1){var aux=0;if(nbvalues%2==1){aux=Math.floor(nbvalues/2);medValue=theList[aux]}else{medValue=(theList[nbvalues/2]+theList[((nbvalues/2)-1)])/2}}if(q1Flag==1){var posa=0;posa=Math.floor(nbvalues/4);if(4*posa==nbvalues){q1Value=(theList[posa-1]+theList[posa])/2}else{q1Value=theList[posa]}}if(q3Flag==1){var posa=0;var posb=0;posa=Math.floor(nbvalues/4);if(4*posa==nbvalues){posb=3*posa;q3Value=(theList[posb]+theList[posb-1])/2}else{q3Value=theList[nbvalues-posa-1]}}for(var i=0;i<=mThisCol;i++){switch(opsThisCol[i]){case"mean":result=meanValue;break;case"sum":result=sumValue;break;case"min":result=minValue;break;case"max":result=maxValue;break;case"median":result=medValue;break;case"q1":result=q1Value;break;case"q3":result=q3Value;break}var precision=decThisCol[i]!=undefined&&!isNaN(decThisCol[i])?decThisCol[i]:2;if(oTypeThisCol!=null&&result){result=result.toFixed(precision);if(tf_Id(labThisCol[i])!=undefined){switch(oTypeThisCol.tf_LCase()){case"innerhtml":if(isNaN(result)||!isFinite(result)||(nbvalues==0)){tf_Id(labThisCol[i]).innerHTML="."}else{tf_Id(labThisCol[i]).innerHTML=result}break;case"setvalue":tf_Id(labThisCol[i]).value=result;break;case"createtextnode":var oldnode=tf_Id(labThisCol[i]).firstChild;var txtnode=tf_CreateText(result);tf_Id(labThisCol[i]).replaceChild(txtnode,oldnode);break}}}else{try{if(isNaN(result)||!isFinite(result)||(nbvalues==0)){tf_Id(labThisCol[i]).innerHTML="."}else{tf_Id(labThisCol[i]).innerHTML=result.toFixed(precision)}}catch(e){}}}if(totRowIndex!=undefined&&row[totRowIndex[ucol]]){row[totRowIndex[ucol]].style.display=""}}}if(this.onAfterOperation){this.onAfterOperation.call(null,this)}},UnhighlightAll:function(){if(this.highlightKeywords&&this.searchArgs!=null){for(var b=0;b<this.searchArgs.length;b++){tf_UnhighlightWord(this,this.searchArgs[b],this.highlightCssClass)}this.highlightedNodes=[]}},__resetGrid:function(){if(this.isFirstLoad){return}if(!this.gridLayout){this.tbl.rows[this.filtersRowIndex].parentNode.insertBefore(this.fltGridEl,this.tbl.rows[this.filtersRowIndex])}if(this.isExternalFlt){for(var b=0;b<this.externalFltTgtIds.length;b++){if(tf_Id(this.externalFltTgtIds[b])){tf_Id(this.externalFltTgtIds[b]).appendChild(this.externalFltEls[b]);if(this.gridLayout&&this.externalFltEls[b].innerHTML==""&&this["col"+b]!=this.fltTypeInp){if(this["col"+b]==this.fltTypeSlc||this["col"+b]==this.fltTypeMulti){this.PopulateSelect(b)}if(this["col"+b]==this.fltTypeCheckList){this.PopulateCheckList(b)}}}}}this.nbFilterableRows=this.GetRowsNb();this.nbVisibleRows=this.nbFilterableRows;this.nbRows=this.tbl.rows.length;if(this.isSortEnabled){this.sort=true}if(this.tbl.rows[this.filtersRowIndex].innerHTML==""){c(this)}else{if(this.popUpFilters){this.headersRow++;this.SetPopupFilters()}}function c(d){d.tbl.deleteRow(d.filtersRowIndex);d.RemoveGrid();d.fltIds=[];d.isFirstLoad=true;if(d.popUpFilters){d.RemovePopupFilters()}d._AddGrid()}if(!this.gridLayout){tf_AddClass(this.tbl,this.prfxTf)}this.hasGrid=true},__containsStr:function(d,m,c,e){var l;var b=(this.matchCase)?"g":"gi";var g=(e==undefined)?this.exactMatch:e;if(g||(c!=this.fltTypeInp&&c!=undefined)){l=new RegExp("(^\\s*)"+tf_RegexpEscape(d)+"(\\s*$)",b)}else{l=new RegExp(tf_RegexpEscape(d),b)}return l.test(m)},IncludeFile:function(d,g,q,m){var p=(m==undefined)?"script":m;var l=tf_IsImported(g,p);if(l){return}var c=this,b=false,e;var n=tf_Tag(document,"head")[0];if(p.tf_LCase()=="link"){e=tf_CreateElm("link",["id",d],["type","text/css"],["rel","stylesheet"],["href",g])}else{e=tf_CreateElm("script",["id",d],["type","text/javascript"],["src",g])}e.onload=e.onreadystatechange=function(){if(!b&&(!this.readyState||this.readyState=="loaded"||this.readyState=="complete")){b=true;if(typeof q==="function"){q.call(null,c)}}};n.appendChild(e)},HasGrid:function(){return this.hasGrid},GetFiltersId:function(){if(!this.hasGrid){return}return this.fltIds},GetValidRowsIndex:function(d){if(!this.hasGrid){return}if(!d){return this.validRowsIndex}this.validRowsIndex=[];for(var b=this.refRow;b<this.nbFilterableRows;b++){var c=this.tbl.rows[b];if(!this.paging){if(this.GetRowDisplay(c)!="none"){this.validRowsIndex.push(c.rowIndex)}}else{if(c.getAttribute("validRow")=="true"||c.getAttribute("validRow")==null){this.validRowsIndex.push(c.rowIndex)}}}return this.validRowsIndex},GetFiltersRowIndex:function(){if(!this.hasGrid){return}return this.filtersRowIndex},GetHeadersRowIndex:function(){if(!this.hasGrid){return}return this.headersRow},GetStartRowIndex:function(){if(!this.hasGrid){return}return this.refRow},GetLastRowIndex:function(){if(!this.hasGrid){return}return(this.nbRows-1)},GetHeaderElement:function(b){var e=(this.gridLayout)?this.headTbl:this.tbl;var g,d=tf_Tag(this.tbl,"thead");for(var c=0;c<this.nbCells;c++){if(c!=b){continue}if(d.length==0){g=e.rows[this.headersRow].cells[c]}if(d.length==1){g=d[0].rows[this.headersRow].cells[c]}break}return g}};function tf_GetNodeText(c){var b=c.textContent||c.innerText||c.innerHTML.replace(/\<[^<>]+>/g,"");b=b.replace(/^\s+/,"").replace(/\s+$/,"");return b.tf_Trim()}function tf_IsObj(b){var c=false;if((typeof b).tf_LCase()=="string"){if(window[b]&&(typeof window[b]).tf_LCase()=="object"){c=true}}else{if(b&&(typeof b).tf_LCase()=="object"){c=true}}return c}function tf_IsFn(b){return(b&&b.constructor==Function)}function tf_IsArray(b){return b.constructor==Array}function tf_Id(b){return document.getElementById(b)}function tf_Tag(c,b){return c.getElementsByTagName(b)}function tf_RegexpEscape(b){function c(g){a=new RegExp("\\"+g,"g");b=b.replace(a,"\\"+g)}chars=new Array("\\","[","^","$",".","|","?","*","+","(",")");for(var d=0;d<chars.length;d++){c(chars[d])}return b}function tf_CreateElm(b){if(b==undefined||b==null||b==""){return}var e=document.createElement(b);if(arguments.length>1){for(var d=0;d<arguments.length;d++){var c=typeof arguments[d];switch(c.tf_LCase()){case"object":if(arguments[d].length==2){e.setAttribute(arguments[d][0],arguments[d][1])}break}}}return e}function tf_CreateText(b){return document.createTextNode(b)}function tf_CreateOpt(g,e,b){var c=b?true:false;var d=(c)?tf_CreateElm("option",["value",e],["selected","true"]):tf_CreateElm("option",["value",e]);d.appendChild(tf_CreateText(g));return d}function tf_CreateCheckItem(g,l,e){if(g==undefined||l==undefined||e==undefined){return}var b=tf_CreateElm("li");var d=tf_CreateElm("label",["for",g]);var c=tf_CreateElm("input",["id",g],["name",g],["type","checkbox"],["value",l]);d.appendChild(c);d.appendChild(tf_CreateText(e));b.appendChild(d);b.label=d;b.check=c;return b}function tf_AddEvent(e,d,b,c){if(e.attachEvent){e.attachEvent("on"+d,b)}else{if(e.addEventListener){e.addEventListener(d,b,(c==undefined?false:c))}else{e["on"+d]=b}}}function tf_RemoveEvent(e,d,b,c){if(e.detachEvent){e.detachEvent("on"+d,b)}else{if(e.removeEventListener){e.removeEventListener(d,b,(c==undefined?false:c))}else{e["on"+d]=null}}}function tf_StopEvent(b){if(!b){b=window.event}if(b.stopPropagation){b.stopPropagation()}else{b.cancelBubble=true}}function tf_CancelEvent(b){if(!b){b=window.event}if(b.preventDefault){b.preventDefault()}else{b.returnValue=false}}function tf_ObjPosition(e,b){var c=0,d=0;if(e&&e.offsetParent&&b.tf_Has(e.nodeName.tf_LCase())){do{c+=e.offsetLeft;d+=e.offsetTop}while(e=e.offsetParent)}return[c,d]}function tf_NumSortAsc(d,c){return(d-c)}function tf_NumSortDesc(d,c){return(c-d)}function tf_IgnoreCaseSort(e,d){var c=e.tf_LCase();var g=d.tf_LCase();return((c<g)?-1:((c>g)?1:0))}String.prototype.tf_MatchCase=function(b){if(!b){return this.tf_LCase()}else{return this.toString()}};String.prototype.tf_Trim=function(){return this.replace(/(^[\s\xA0]*)|([\s\xA0]*$)/g,"")};String.prototype.tf_LCase=function(){return this.toLowerCase()};String.prototype.tf_UCase=function(){return this.toUpperCase()};Array.prototype.tf_Has=function(b,c){var d=(c==undefined)?false:c;for(i=0;i<this.length;i++){if(this[i].toString().tf_MatchCase(d)==b){return true}}return false};Array.prototype.tf_IndexByValue=function(b,c){var d=(c==undefined)?false:c;for(i=0;i<this.length;i++){if(this[i].toString().tf_MatchCase(d)==b){return i}}return(-1)};window.tf_isIE=(window.innerHeight)?false:/msie|MSIE 6/.test(navigator.userAgent)?true:false;window.tf_isIE7=(window.innerHeight)?false:/msie|MSIE 7/.test(navigator.userAgent)?true:false;function tf_HasClass(c,b){if(!c){return false}return c.className.match(new RegExp("(\\s|^)"+b+"(\\s|$)"))}function tf_AddClass(c,b){if(!c){return}if(!tf_HasClass(c,b)){c.className+=" "+b}}function tf_RemoveClass(d,b){if(!d){return}if(!tf_HasClass(d,b)){return}var c=new RegExp("(\\s|^)"+b+"(\\s|$)");d.className=d.className.replace(c,"")}function tf_IsValidDate(g,p){if(p==null){p="DMY"}p=p.toUpperCase();if(p.length!=3){if(p=="DDMMMYYYY"){var o=tf_FormatDate(g,p);g=o.getDate()+"/"+(o.getMonth()+1)+"/"+o.getFullYear();p="DMY"}}if((p.indexOf("M")==-1)||(p.indexOf("D")==-1)||(p.indexOf("Y")==-1)){p="DMY"}if(p.substring(0,1)=="Y"){var e=/^\d{2}(\-|\/|\.)\d{1,2}\1\d{1,2}$/;var c=/^\d{4}(\-|\/|\.)\d{1,2}\1\d{1,2}$/}else{if(p.substring(1,2)=="Y"){var e=/^\d{1,2}(\-|\/|\.)\d{2}\1\d{1,2}$/;var c=/^\d{1,2}(\-|\/|\.)\d{4}\1\d{1,2}$/}else{var e=/^\d{1,2}(\-|\/|\.)\d{1,2}\1\d{2}$/;var c=/^\d{1,2}(\-|\/|\.)\d{1,2}\1\d{4}$/}}if((e.test(g)==false)&&(c.test(g)==false)){return false}var m=g.split(RegExp.$1);if(p.substring(0,1)=="M"){var l=m[0]}else{if(p.substring(1,2)=="M"){var l=m[1]}else{var l=m[2]}}if(p.substring(0,1)=="D"){var q=m[0]}else{if(p.substring(1,2)=="D"){var q=m[1]}else{var q=m[2]}}if(p.substring(0,1)=="Y"){var n=m[0]}else{if(p.substring(1,2)=="Y"){var n=m[1]}else{var n=m[2]}}if(parseFloat(n)<=50){n=(parseFloat(n)+2000).toString()}if(parseFloat(n)<=99){n=(parseFloat(n)+1900).toString()}var b=new Date(parseFloat(n),parseFloat(l)-1,parseFloat(q),0,0,0,0);if(parseFloat(q)!=b.getDate()){return false}if(parseFloat(l)-1!=b.getMonth()){return false}return true}function tf_FormatDate(b,g){if(g==null){g="DMY"}var c,e;function l(m){if(m==undefined){return 0}if(m.length>2){return m}var n;if(m<=99&&m>50){n="19"+m}if(m<50||m=="00"){n="20"+m}return n}function d(p){if(p==undefined){return 0}var q;var o=new Array("january","february","march","april","may","june","july","august","september","october","november","december","jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec");for(var m=0;m<o.length;m++){var n=o[m];if(p.toLowerCase()==n){q=m+1;break}}if((q>11)||(q<23)){q=q-12}if((q<1)||(q>12)){return 0}return q}switch(g.toUpperCase()){case"DDMMMYYYY":e=b.replace(/[- \/.]/g," ").split(" ");c=new Date(l(e[2]),d(e[1])-1,e[0]);break;case"DMY":e=b.replace(/^(0?[1-9]|[12][0-9]|3[01])([- \/.])(0?[1-9]|1[012])([- \/.])((\d\d)?\d\d)$/,"$1 $3 $5").split(" ");c=new Date(l(e[2]),e[1]-1,e[0]);break;case"MDY":e=b.replace(/^(0?[1-9]|1[012])([- \/.])(0?[1-9]|[12][0-9]|3[01])([- \/.])((\d\d)?\d\d)$/,"$1 $3 $5").split(" ");c=new Date(l(e[2]),e[0]-1,e[1]);break;case"YMD":e=b.replace(/^((\d\d)?\d\d)([- \/.])(0?[1-9]|1[012])([- \/.])(0?[1-9]|[12][0-9]|3[01])$/,"$1 $4 $6").split(" ");c=new Date(l(e[0]),e[1]-1,e[2]);break;default:e=b.replace(/^(0?[1-9]|[12][0-9]|3[01])([- \/.])(0?[1-9]|1[012])([- \/.])((\d\d)?\d\d)$/,"$1 $3 $5").split(" ");c=new Date(l(e[2]),e[1]-1,e[0]);break}return c}function tf_RemoveNbFormat(b,c){if(b==null){return}if(c==null){c="us"}var d=b;if(c.tf_LCase()=="us"){d=+d.replace(/[^\d\.-]/g,"")}else{d=+d.replace(/[^\d\,-]/g,"").replace(",",".")}return d}function tf_IsImported(d,e){var l=false;var m=(e==undefined)?"script":e;var b=m=="script"?"src":"href";var g=tf_Tag(document,m);for(var c=0;c<g.length;c++){if(g[c][b]==undefined){continue}if(g[c][b].match(d)){l=true;break}}return l}function tf_IsStylesheetImported(e){var n=false;if(!document.styleSheets){return n}var g=document.styleSheets;var m=new RegExp(e);for(var d=0;d<g.length;d++){if(g[d].imports){var c=g[d].imports;for(var b=0;b<c.length;b++){if(c[b].href.tf_LCase()==e.tf_LCase()){n=true;break}}}else{var l=(g[d].cssRules?g[d].cssRules:g[d].rules);for(var b=0;b<l.length;b++){if(m.test(l[b].cssText)){n=true;break}}}}return n}function tf_WriteCookie(d,e,b){var c="";if(b!=null){c=new Date((new Date()).getTime()+b*3600000);c="; expires="+c.toGMTString()}document.cookie=d+"="+escape(e)+c}function tf_ReadCookie(b){var d="";var c=b+"=";if(document.cookie.length>0){offset=document.cookie.indexOf(c);if(offset!=-1){offset+=c.length;end=document.cookie.indexOf(";",offset);if(end==-1){end=document.cookie.length}d=unescape(document.cookie.substring(offset,end))}}return d}function tf_CookieValueArray(c,d){if(d==undefined){d=","}var e=tf_ReadCookie(c);var b=e.split(d);return b}function tf_CookieValueByIndex(c,b,d){if(d==undefined){d=","}var e=tf_CookieValueArray(c,d);return e[b]}function tf_RemoveCookie(b){tf_WriteCookie(b,"",-1)}function tf_HighlightWord(g,c,v,e){if(g.hasChildNodes){for(var n=0;n<g.childNodes.length;n++){tf_HighlightWord(g.childNodes[n],c,v,e)}}if(g.nodeType==3){var r=g.nodeValue.tf_LCase();var q=c.tf_LCase();if(r.indexOf(q)!=-1){var l=g.parentNode;if(l.className!=v){var p=g.nodeValue;var d=r.indexOf(q);var s=tf_CreateText(p.substr(0,d));var u=p.substr(d,c.length);var b=tf_CreateText(p.substr(d+c.length));var m=tf_CreateText(u);var t=tf_CreateElm("span");t.className=v;t.appendChild(m);l.insertBefore(s,g);l.insertBefore(t,g);l.insertBefore(b,g);l.removeChild(g);e.highlightedNodes.push(t.firstChild)}}}}function tf_UnhighlightWord(e,c,t){var b=[];for(var q=0;q<e.highlightedNodes.length;q++){var g=e.highlightedNodes[q];var s=g.nodeValue.tf_LCase();var r=c.tf_LCase();if(s.indexOf(r)!=-1){var l=g.parentNode;if(l.className==t){var p=l.previousSibling;var d=l.nextSibling;d.nodeValue=p.nodeValue+g.nodeValue+d.nodeValue;p.nodeValue="";g.nodeValue="";b.push(q)}}}for(var m=0;m<b.length;m++){e.highlightedNodes.splice(b[m],1)}}function tf_SetOuterHtml(){if(document.body.__defineGetter__){if(HTMLElement){var b=HTMLElement.prototype;if(b.__defineGetter__){b.__defineGetter__("outerHTML",function(){var e=this.parentNode;var d=tf_CreateElm(e.tagName);d.appendChild(this);var c=d.innerHTML;e.appendChild(this);return c})}}}if(b.__defineSetter__){HTMLElement.prototype.__defineSetter__("outerHTML",function(d){var c=this.ownerDocument.createRange();c.setStartBefore(this);var e=c.createContextualFragment(d);this.parentNode.replaceChild(e,this);return d})}}function grabEBI(b){return tf_Id(b)}function grabTag(c,b){return tf_Tag(c,b)}function tf_GetCellText(b){return tf_GetNodeText(b)}function tf_isObject(b){return tf_IsObj(b)}function tf_isObj(b){return tf_IsObj(b)}function tf_isFn(b){return tf_IsFn(b)}function tf_isArray(b){return tf_IsArray(b)}function tf_addEvent(d,c,b){return tf_AddEvent(d,c,b)}function tf_removeEvent(d,c,b){return tf_RemoveEvent(d,c,b)}function tf_addClass(c,b){tf_AddClass(c,b)}function tf_removeClass(c,b){return tf_RemoveClass(c,b)}function tf_hasClass(c,b){return tf_HasClass(c,b)}function tf_isValidDate(b,c){return tf_IsValidDate(b,c)}function tf_formatDate(b,c){return tf_FormatDate(b,c)}function tf_removeNbFormat(b,c){return tf_RemoveNbFormat(b,c)};