   <%= javascript_include_tag('jquery.tablesorter.min') %>
   <%= stylesheet_link_tag('status_update', 'people_status')%>
   
    <% @totalChallegne = 1 %>
    <% @accepted = 1 %>
    <% @thinking = 0 %>
    <% @declined = 0 %>

<% if @challenge.instance_of?ChildChallenge %>
    <% @parentChallenge = Challenge.where(:_id => @challenge.challenge_id).first%>
    <% abtTatal = @parentChallenge.child_challenges.count %>
    <% @totalChallegne = abtTatal +1 %>
      <% @parentChallenge.child_challenges.each do |eachChallenge| %>
      <% if eachChallenge.social_type.status == 1 %>
          <% @accepted += 1 %>
      <% elsif eachChallenge.social_type.status == -1 %>
          <% @declined += 1 %>
      <% else %>
          <% @thinking += 1 %>
      <% end %>
    <% end %>
<% else %>
    <% abtTatal = @challenge.child_challenges.count %>
    <% @totalChallegne = abtTatal +1 %>
    <% @challenge.child_challenges.each do |eachChallenge| %>
      <% if eachChallenge.social_type.status == 1 %>
          <% @accepted += 1 %>
      <% elsif eachChallenge.social_type.status == -1 %>
          <% @declined += 1 %>
      <% else %>
          <% @thinking += 1 %>
      <% end %>
    <% end %>
<% end %>

<% if @challenge.instance_of?ChildChallenge %>
    <% @parentChallenge = Challenge.where(:_id => @challenge.challenge_id).first%>    
    <% @parentChallenge.child_challenges.each do |eachChallenge| %>

    <% end %>
<% else %>    
    <% @challenge.child_challenges.each do |eachChallenge| %>
      
    <% end %>
<% end %>

<table width="100%">
  <tr id="changeChallegne">
    <% if @challenge.instance_of?ChildChallenge%>	 
      <% if @challenge.social_type.status.to_i == 1 %>
        <td width="85%">
          <b>You accepted the challenge</b>
        </td>
      <td width="15%">
        <%= link_to image_tag("change.png" , :class=> "update_challenge_stat"), change_challenge_status_challenges_path(:id => @challenge), :id=> "status_update_popup" %>
       </td>
      <%else%>
      <%end%>
    <%else%>			
    <%end%>
  </tr>
  <tr id="peopleinchallenge">
    <td>
      <b>People in this challenge(<%= @totalChallegne %>)</b>
    </td>
    <td>
      <%= image_tag("searchbutton.PNG", :id=>"floatRight") %>
    </td>
  </tr>
  <tr id="changeChallegne">
    <td>
      <%= check_box_tag 'myfrd', '1', false %> <b>show only my friends (<%= @onlyMyFrd.count %>)</b>
    </td>
    <td>
      
    </td>
  </tr>
</table>
<section id="pStatusAll">
  <div class="tabs">
        <ul class="tabNavigation">
            <li>                
                <a href="#first"><%= image_tag("icon_accept.png")%><b>Accepted (<%= @accepted %>)</b></a>              
            </li>
            <li>                
                <a href="#second"><%= image_tag("icon_thinking.png")%><b>Thinking (<%= @thinking %>)</b></a>              
            </li>            
            <li>                
                <a href="#third"><%= image_tag("icon_decline.png")%><b>Declined (<%= @declined %>)</b></a>
            </li>
            <li>                            
                <a href="#fourth"><%= image_tag("btn_questionmark_up.png")%><b></b></a>
            </li>
        </ul>
        <div id="first">            
          <table width="100%" id="myTable" class="tablesorter"> 
              <thead>
                  <tr>
                      <th></th>
                      <th></th>                          
                  </tr>
              </thead>
              <tbody>
              <tr>
                <td class="bordercolor" width="15%">
                  <% if @challenge.instance_of?ChildChallenge %>
                      <%= image_tag(FbGraph::User.new(@challenge.parent.user_id).fetch.picture) %>
                  <% else %>
                      <%= image_tag(FbGraph::User.new(@challenge.user_id).fetch.picture) %>
                  <% end %>
                </td>
                <td class="bordercolor" width="85%" id="nameColor">
                  <% if @challenge.instance_of?ChildChallenge %>
                      <%= FbGraph::User.new(@challenge.parent.user_id).fetch.name %>
                  <% else %>
                      <%= FbGraph::User.new(@challenge.user_id).fetch.name %>
                  <% end %>                  
                </td>
              </tr>
              <% if @challenge.instance_of?ChildChallenge %>
                  <% @parentChallenge = Challenge.where(:_id => @challenge.challenge_id).first%>
                  <% @parentChallenge.child_challenges.each do |eachChallenge| %>
                    <% if eachChallenge.social_type.status == 1 %>
                      <tr>
                        <td class="bordercolor" width="15%">                                                       
                            <%= image_tag(FbGraph::User.new(eachChallenge.user_id).fetch.picture) %>                          
                        </td>
                        <td class="bordercolor" width="85%" id="nameColor">                          
                            <%= FbGraph::User.new(eachChallenge.user_id).fetch.name %>                           
                        </td>
                      </tr>
                    <% end %>
                  <% end %>
              <% else %>
                  <% @challenge.child_challenges.each do |eachChallenge| %>
                    <% if eachChallenge.social_type.status == 1 %>
                      <tr>
                        <td class="bordercolor" width="15%">                                                       
                            <%= image_tag(FbGraph::User.new(eachChallenge.user_id).fetch.picture) %>                          
                        </td>
                        <td class="bordercolor" width="85%" id="nameColor">                          
                            <%= FbGraph::User.new(eachChallenge.user_id).fetch.name %>                           
                        </td>
                      </tr>
                    <% end %>
                  <% end %>
              <% end %>
              </tbody>        
            </table>
        </div>
        <div id="second">            
            <table id="myTable" class="tablesorter">
              <thead>
                  <tr>
                      <th></th>
                      <th></th>                          
                  </tr>
              </thead>
              <tbody>
              <% if @challenge.instance_of?ChildChallenge %>
                  <% @parentChallenge = Challenge.where(:_id => @challenge.challenge_id).first%>
                  <% @parentChallenge.child_challenges.each do |eachChallenge| %>
                    <% if eachChallenge.social_type.status.to_i == 0 %>
                      <tr>
                        <td class="bordercolor" width="15%">                                                       
                            <%= image_tag(FbGraph::User.new(eachChallenge.user_id).fetch.picture) %>                          
                        </td>
                        <td class="bordercolor" width="85%" id="nameColor">                          
                            <%= FbGraph::User.new(eachChallenge.user_id).fetch.name %>                           
                        </td>
                      </tr>
                    <% end %>
                  <% end %>
              <% else %>
                  <% @challenge.child_challenges.each do |eachChallenge| %>
                    <% if eachChallenge.social_type.status.to_i == 0 %>
                      <tr>
                        <td class="bordercolor" width="15%">                                                       
                            <%= image_tag(FbGraph::User.new(eachChallenge.user_id).fetch.picture) %>                          
                        </td>
                        <td class="bordercolor" width="85%" id="nameColor">                          
                            <%= FbGraph::User.new(eachChallenge.user_id).fetch.name %>                           
                        </td>
                      </tr>
                    <% end %>
                  <% end %>
              <% end %>
              </tbody>        
            </table>
        </div>
        <div id="third">
          <table id="myTable" class="tablesorter">
          <thead>
                <tr>
                    <th></th>
                    <th></th>                          
                </tr>
            </thead>
            <tbody>
            <% if @challenge.instance_of?ChildChallenge %>
              <% @parentChallenge = Challenge.where(:_id => @challenge.challenge_id).first%>
              <% @parentChallenge.child_challenges.each do |eachChallenge| %>              
                <% if eachChallenge.social_type.status.to_i == -1 %>
                  <tr>
                    <td class="bordercolor" width="15%">                                                       
                        <%= image_tag(FbGraph::User.new(eachChallenge.user_id).fetch.picture) %>                          
                    </td>
                    <td class="bordercolor" width="85%" id="nameColor">                          
                        <%= FbGraph::User.new(eachChallenge.user_id).fetch.name %>                           
                    </td>
                  </tr>
                <% end %>
              <% end %>
          <% else %>
              <% @challenge.child_challenges.each do |eachChallenge| %>                  
                <% if eachChallenge.social_type.status.to_i == -1 %>
                  <tr>
                    <td class="bordercolor" width="15%">                                                       
                        <%= image_tag(FbGraph::User.new(eachChallenge.user_id).fetch.picture) %>                          
                    </td>
                    <td class="bordercolor" width="85%" id="nameColor">                          
                        <%= FbGraph::User.new(eachChallenge.user_id).fetch.name %>                           
                    </td>
                  </tr>
                <% end %>
              <% end %>
          <% end %>
          </tbody>        
          </table>        
        </div>
        <div id="fourth">
            <h2>No info</h2>
             <span style="color="#666666">Under process.<span>
        </div>
    </div>
</section>

<section id="pStatusMy" style="display: none">
  <div class="tabs">
        <ul class="tabNavigation">
            <li>                
                <a href="#first"><%= image_tag("icon_accept.png")%><b>Accepted (<%= @myAccepted.count %>)</b></a>              
            </li>
            <li>                
                <a href="#second"><%= image_tag("icon_thinking.png")%><b>Thinking (<%= @myThinking.count %>)</b></a>              
            </li>            
            <li>                
                <a href="#third"><%= image_tag("icon_decline.png")%><b>Declined (<%= @myDeclined.count %>)</b></a>
            </li>
            <li>                            
                <a href="#fourth"><%= image_tag("btn_questionmark_up.png")%><b></b></a>
            </li>
        </ul>
        <div id="first">            
          <table width="100%" id="myTable" class="tablesorter"> 
              <thead>
                  <tr>
                      <th></th>
                      <th></th>                          
                  </tr>
              </thead>
              <tbody> 
                <% if @myAccepted.count > 0 %>
                    <% @myAccepted.each do |eachChallenge| %>                    
                        <tr>
                          <td class="bordercolor" width="15%">                                                       
                              <%= image_tag(FbGraph::User.new(eachChallenge).fetch.picture) %>                          
                          </td>
                          <td class="bordercolor" width="85%" id="nameColor">                          
                              <%= FbGraph::User.new(eachChallenge).fetch.name %>                           
                          </td>
                        </tr>                    
                    <% end %>
                <% end %>        
              </tbody>        
            </table>
        </div>
        <div id="second">            
            <table id="myTable" class="tablesorter">              
              <thead>
                  <tr>
                      <th></th>
                      <th></th>                          
                  </tr>
              </thead>
              <tbody>
              <% if @myThinking.count > 0 %>  
                  <% @myThinking.each do |eachChallenge| %>                    
                    <tr>
                      <td class="bordercolor" width="15%">                                                       
                          <%= image_tag(FbGraph::User.new(eachChallenge).fetch.picture) %>                          
                      </td>
                      <td class="bordercolor" width="85%" id="nameColor">                          
                          <%= FbGraph::User.new(eachChallenge).fetch.name %>                           
                      </td>
                    </tr>
                  <% end %>              
              <% end %>      
              </tbody>        
            </table>
        </div>
        <div id="third">
          <table id="myTable" class="tablesorter">
          <thead>
                <tr>
                    <th></th>
                    <th></th>                          
                </tr>
            </thead>
            <tbody>
            <% if @myDeclined.count > 0 %>  
                <% @myDeclined.each do |eachChallenge| %>                              
                  <tr>
                    <td class="bordercolor" width="15%">                                                       
                        <%= image_tag(FbGraph::User.new(eachChallenge).fetch.picture) %>                          
                    </td>
                    <td class="bordercolor" width="85%" id="nameColor">                          
                        <%= FbGraph::User.new(eachChallenge).fetch.name %>                           
                    </td>
                  </tr>                
                <% end %>
            <% end %>      
          </tbody>        
          </table>        
        </div>
        <div id="fourth">
            <h2>No info</h2>
             <span style="color="#666666">Under process.<span>
        </div>
    </div>
</section>


<script type="text/javascript" charset="utf-8">
    $(function () {
        var tabContainers = $('div.tabs > div');
        tabContainers.hide().filter(':first').show();

        $('div.tabs ul.tabNavigation a').click(function () {
            tabContainers.hide();
            tabContainers.filter(this.hash).show();
            $('div.tabs ul.tabNavigation a').removeClass('selected');
            $(this).addClass('selected');
            return false;
        }).filter(':first').click();
    });
</script>

<script>
  $(document).ready(function(){
    $("#myfrd").click(function(){      
      if ($('#myfrd').attr('checked')) 
      {
          $("#pStatusAll").hide();
          $("#pStatusMy").show();
      }
      else
      {         
          $("#pStatusMy").hide();
          $("#pStatusAll").show();
      }
    });    
  });
</script>

<script type="text/javascript" id="js">
  $(document).ready(function() {
      // call the tablesorter plugin
      $("table").tablesorter({
              // sort on the first column and third column, order asc
              sortList: [[0,0],[1,0]]
      });
  }); 
</script>
<script>
	$('#status_update_popup').colorbox();
</script>



